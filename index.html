<html>
<head>
  <title>Clicker</title>
  <meta charset="utf-8">
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword
  } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";
  import {
    getDatabase,
    ref,
    set,
    get,
    child,
    update
  } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-database.js";

  // === –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase ===
  const firebaseConfig = {
    apiKey: "AIzaSyAlYasR91o2zMvD3OYYNFHdoyAAvfkiK80",
    authDomain: "spaceclicker-78ef5.firebaseapp.com",
    projectId: "spaceclicker-78ef5",
    storageBucket: "spaceclicker-78ef5.appspot.com",
    messagingSenderId: "1007817982727",
    appId: "1:1007817982727:web:c653b6f656b017cbb73ba2",
    databaseURL: "https://spaceclicker-78ef5-default-rtdb.firebaseio.com"
  };

  // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase ===
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getDatabase(app);

  let userData = null; // –ö—ç—à –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  let currentUid = null; // UID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

  async function getUidByUsername(username) {
    const usernameRef = ref(db, 'usernames/' + username);
    const snapshot = await get(usernameRef);
    if (snapshot.exists()) {
      return snapshot.val();
    } else {
      return null;
    }
  }

  async function getUserByUsername(username) {
    const uid = await getUidByUsername(username);
    if (!uid) return null;
    const userRef = ref(db, 'users/' + uid);
    const snapshot = await get(userRef);
    if (snapshot.exists()) {
      return snapshot.val();
    } else {
      return null;
    }
  }

  function getCurrentUser() {
    if (isDemo) {
      return demoUser;
    }
    return userData;
  }

  // === –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ===
  async function doRegister() {
    const username = document.getElementById("regUsername").value.trim();
    const password = document.getElementById("regPassword").value.trim();
    const t = translations[currentLanguage];

    if (!username || !password) {
      showMsg("registerMsg", t.enterUsernamePassword, false);
      return;
    }

    const email = `${username}@clicker.com`;
    try {
      const userCred = await createUserWithEmailAndPassword(auth, email, password);
      const uid = userCred.user.uid;
      await set(ref(db, "users/" + uid), {
        username,
        count: 0,
        money: 0,
        level: 0,
        createdAt: new Date().toISOString(),
        has_small_cookie: 0,
        equipped_small_cookie: 0,
        has_medium_cookie: 0,
        equipped_medium_cookie: 0,
        has_large_cookie: 0,
        equipped_large_cookie: 0,
        is_blocked: 0,
        achieved_100: 0,
        achieved_500: 0,
        achieved_1000: 0,
        achieved_3000: 0,
        achieved_5000: 0,
        achieved_10000: 0,
        active_quest: null,
        completed_quests: []
      });
      await set(ref(db, "usernames/" + username), uid);
      showMsg("registerMsg", t.registrationSuccess, true);
      showLogin();
    } catch (error) {
      showMsg("registerMsg", error.message, false);
      console.error(error);
    }
  }

  // === –í—Ö–æ–¥ ===
  async function doLogin() {
    const username = document.getElementById("loginUsername").value.trim();
    const password = document.getElementById("loginPassword").value.trim();
    const t = translations[currentLanguage];

    if (!username || !password) {
      showMsg("loginMsg", t.enterUsernamePassword, false);
      return;
    }

    const email = `${username}@clicker.com`;
    try {
      const userCred = await signInWithEmailAndPassword(auth, email, password);
      currentUid = userCred.user.uid;

      const snapshot = await get(child(ref(db), "users/" + currentUid));
      if (snapshot.exists()) {
        userData = snapshot.val();
        if (userData.is_blocked) {
          showBlocked();
          return;
        }
        currentUsername = userData.username;
        count = Number(userData.count) || 0;
        money = Number(userData.money) || 0;
        internal_level = userData.level || 0;
        showMsg("loginMsg", t.loginSuccess, true);
        setTimeout(showLoading, 800);
      } else {
        showMsg("loginMsg", t.userNotFound, false);
      }
    } catch (error) {
      showMsg("loginMsg", error.message, false);
      console.error(error);
    }
  }

  // === –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ ===
  async function increment() {
    if (isPaused) return;
    let multiplier = 1;
    if (userData.equipped_small_cookie) multiplier *= 1.5;
    if (userData.equipped_medium_cookie) multiplier *= 2;
    if (userData.equipped_large_cookie) multiplier *= 2.5;
    count += multiplier;
    internal_level += 1;
    if (userData.active_quest !== null) {
      questClicks += multiplier;
      checkQuestCompletion();
    }
    updateCounter();
    updateLevel();
    userData.count = count;
    userData.level = internal_level;
    checkAchievements(currentUsername);
    const user = auth.currentUser;
    if (user) {
      try {
        await update(ref(db, "users/" + user.uid), {
          count,
          money,
          level: internal_level
        });
      } catch (error) {
        console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", error);
      }
    }
  }

  // === –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ ===
  window.doRegister = doRegister;
  window.doLogin = doLogin;
  window.increment = increment;
  // ... (–ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–¥ –º–æ–¥—É–ª—è)

// === –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ ===
window.doRegister = doRegister;
window.doLogin = doLogin;
window.increment = increment;

// === –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ===
window.getCurrentUser = getCurrentUser;
window.getUserByUsername = getUserByUsername;
window.userData = userData;
window.currentUid = currentUid;
window.showGame = showGame;
window.checkQuestCompletion = checkQuestCompletion;
window.checkAchievements = checkAchievements;
window.renderInventory = renderInventory;
window.showInventory = showInventory;
window.renderQuests = renderQuests;
window.showQuests = showQuests;
window.renderShop = renderShop;
window.showShop = showShop;
window.renderAchievements = renderAchievements;
window.showAchievements = showAchievements;
window.showQuests = showQuests;
window.logout = logout;
</script>



  <style>
    html, body {
      overflow: hidden;  /* –°–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ª–æ—Å—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
      margin: 0;         /* –£–±–∏—Ä–∞–µ—Ç –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
      padding: 0;        /* –£–±–∏—Ä–∞–µ—Ç padding */
      height: 100%;      /* –ó–∞—Å—Ç–∞–≤–ª—è–µ—Ç body –∑–∞–Ω–∏–º–∞—Ç—å –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
      width: 100%;       /* –ó–∞—Å—Ç–∞–≤–ª—è–µ—Ç body –∑–∞–Ω–∏–º–∞—Ç—å –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
      font-family: Arial; 
      background: #000 url('https://www.transparenttextures.com/patterns/stardust.png'); /* Space background */
      color: #fff; /* White text for space theme */
    }
    .container {
      width: 320px;
      margin: 50px auto 0 auto;
      background: rgba(0, 0, 50, 0.8); /* Dark blue semi-transparent for space feel */
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5); /* Neon glow */
      position: relative;
      left: 50px;
      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out, box-shadow 0.5s ease;
    }
    .container:hover {
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.8); /* Enhanced glow on hover */
    }
    .container.fade-in {
      opacity: 1;
      transform: translateY(0);
    }
    input { 
      width: 100%; 
      padding: 8px; 
      margin: 8px 0; 
      box-sizing: border-box; 
      transition: border-color 0.3s, box-shadow 0.3s; 
      border: 1px solid #00ffff; /* Cyan border */
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
    }
    input:focus { 
      border-color: #ff00ff; /* Magenta on focus */
      box-shadow: 0 0 10px #ff00ff;
    }
    button { 
      padding: 8px 16px; 
      margin-right: 10px; 
      transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease, color 0.3s ease; 
      cursor: pointer;
      border: none;
      border-radius: 5px;
      background-color: #4CAF50; /* Default green, but will override for theme */
      color: white;
    }
    button:hover { 
      transform: scale(1.1) rotate(2deg); /* More animation: scale and rotate */
      box-shadow: 0 4px 8px rgba(255, 0, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.7); /* Glowing shadow */
      background-color: #45a049;
    }
    button:active {
      transform: scale(0.95) rotate(-2deg); /* Click animation */
      box-shadow: 0 0 10px rgba(255, 255, 0, 0.8); /* Yellow flash on click */
    }
    #msg { margin-top: 10px; height: 18px; color: red; }
    .link-button {
      background: none;
      border: none;
      color: #00ffff; /* Cyan for links */
      text-decoration: underline;
      cursor: pointer;
      padding: 0;
      font-size: 14px;
      transition: color 0.3s ease, transform 0.3s ease, text-shadow 0.3s ease;
    }
    .link-button:hover {
      color: #ff00ff; /* Magenta on hover */
      transform: scale(1.1);
      text-shadow: 0 0 5px #ff00ff;
    }
    #loadingScreen {
      text-align: center;
      margin-top: 50px;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
      color: #00ffff; /* Cyan text */
    }
    #loadingScreen.visible {
      opacity: 1;
    }
    #gameScreen {
      text-align: center;
      margin-top: 100px;
      position: relative;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
    }
    #gameScreen.visible {
      opacity: 1;
      transform: translateY(0);
    }
    #gameScreen button {
      font-size: 20px;
      padding: 10px 20px;
      background-color: #2196F3; /* Blue for space */
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
    }
    #gameScreen button:hover {
      background-color: #0b7dda;
      transform: scale(1.2) rotate(5deg); /* More dynamic animation */
      box-shadow: 0 0 15px #00ffff;
    }
    #gameScreen button:active {
      transform: scale(1.0) rotate(-5deg);
      box-shadow: 0 0 20px #ff00ff;
    }
    #shopButton, #inventoryButton, #questsButton {
      position: absolute;
      left: 10px;
      font-size: 16px;
      padding: 8px 16px;
      background-color: #FF9800; /* Orange override */
    }
    #shopButton {
      top: 0px;
    }
    #inventoryButton {
      top: 40px;
    }
    #questsButton {
      top: 80px;
    }
    #achievementsButton, #promoButton {
      position: absolute;
      right: 10px;
      font-size: 16px;
      padding: 8px 16px;
    }
    #achievementsButton {
      top: 40px;
      background-color: #2196F3;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #achievementsButton:hover {
      background-color: #0b7dda;
    }
    #promoButton {
      top: 80px;
      background-color: #2196F3;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #promoButton:hover {
      background-color: #0b7dda;
    }
    #exitButton {
      position: absolute;
      top: 120px;
      right: 10px;
      background-color: red;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 8px 16px;
      cursor: pointer;
      font-size: 16px;
    }
    #exitButton:hover {
      background-color: darkred;
    }
    #shopMenu, #inventoryMenu, #adminMenu, #issueClicksMenu, #issueCookieMenu, #issueAchievementMenu, #blockedMenu, #achievementsMenu, #promoMenu, #demoExpiredMenu, #consoleMenu, #questsMenu, #settingsMenu {
      display: none;
      position: absolute;
      background: rgba(0, 0, 50, 0.9); /* Space dark blue */
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      width: 300px;
      z-index: 3000;
      cursor: move;
      opacity: 0;
      transform: scale(0.95) translateY(-20px);
      transition: opacity 0.5s ease, transform 0.5s ease, box-shadow 0.5s ease;
      color: #fff;
    }
    #shopMenu.open, #inventoryMenu.open, #adminMenu.open, #issueClicksMenu.open, #issueCookieMenu.open, #issueAchievementMenu.open, #blockedMenu.open, #achievementsMenu.open, #promoMenu.open, #demoExpiredMenu.open, #consoleMenu.open, #questsMenu.open, #settingsMenu.open {
      opacity: 1;
      transform: scale(1) translateY(0);
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
    }
    #shopMenu {
      top: 20%;
      left: 30%;
    }
    #inventoryMenu {
      top: 20%;
      left: 50%;
    }
    #adminMenu {
      top: 20%;
      left: 40%;
    }
    #issueClicksMenu, #issueCookieMenu, #issueAchievementMenu, #blockedMenu, #promoMenu, #demoExpiredMenu, #consoleMenu {
      top: 30%;
      left: 40%;
    }
    #achievementsMenu, #questsMenu, #settingsMenu {
      top: 20%;
      left: 40%;
    }
    #questsMenu {
      max-height: 400px;
      overflow-y: auto;
    }
    #shopMenu h3, #inventoryMenu h3, #adminMenu h3, #issueClicksMenu h3, #issueCookieMenu h3, #issueAchievementMenu h3, #blockedMenu h3, #achievementsMenu h3, #promoMenu h3, #demoExpiredMenu h3, #consoleMenu h3, #questsMenu h3, #settingsMenu h3 {
      margin-top: 0;
      color: #00ffff; /* Cyan headers */
      cursor: grab;
      text-shadow: 0 0 5px #00ffff;
    }
    #shopMenu button, #inventoryMenu button, #adminMenu button, #issueClicksMenu button, #issueCookieMenu button, #issueAchievementMenu button, #blockedMenu button, #achievementsMenu button, #promoMenu button, #demoExpiredMenu button, #consoleMenu button, #questsMenu button, #settingsMenu button {
      font-size: 16px;
      padding: 8px 16px;
      margin-top: 10px;
      background-color: #2196F3;
      transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
    }
    #shopMenu button:hover, #inventoryMenu button:hover, #adminMenu button:hover, #issueClicksMenu button:hover, #issueCookieMenu button:hover, #issueAchievementMenu button:hover, #blockedMenu button:hover, #achievementsMenu button:hover, #promoMenu button:hover, #demoExpiredMenu button:hover, #consoleMenu button:hover, #questsMenu button:hover, #settingsMenu button:hover {
      transform: scale(1.1) rotate(3deg);
      box-shadow: 0 0 15px #ff00ff;
    }
    #shopMenu button:active, #inventoryMenu button:active, #adminMenu button:active, #issueClicksMenu button:active, #issueCookieMenu button:active, #issueAchievementMenu button:active, #blockedMenu button:active, #achievementsMenu button:active, #promoMenu button:active, #demoExpiredMenu button:active, #consoleMenu button:active, #questsMenu button:active, #settingsMenu button:active {
      transform: scale(0.9) rotate(-3deg);
      box-shadow: 0 0 20px #ffff00;
    }
    h2 {
      color: #00ffff;
      font-size: 24px;
      transition: color 0.3s ease, text-shadow 0.3s ease;
      text-shadow: 0 0 5px #00ffff;
    }
    h2:hover {
      color: #ff00ff;
      text-shadow: 0 0 10px #ff00ff;
    }
    #keyContainer {
      text-align: center;
      margin-top: 50px;
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
    }
    #keyContainer.fade-out {
      opacity: 0;
      transform: translateY(-20px);
    }
    #authContainer {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
    }
    #authContainer.fade-in {
      opacity: 1;
      transform: translateY(0);
    }
    #currentQuest {
      color: #ffff00;
      font-size: 18px;
      margin-bottom: 10px;
    }
    #pauseOverlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    #pauseMenu {
      background: rgba(0, 0, 50, 0.9);
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      text-align: center;
      color: #fff;
    }
    #pauseMenu button {
      display: block;
      margin: 10px auto;
      width: 200px;
    }
  </style>
</head>
<body onload="init();">
  <div id="keyContainer" class="container">
    <h2 id="enterKeyTitle"></h2>
    <input type="text" id="inputText" placeholder=""><br><br>
    <button id="submitKeyButton" onclick="checkKey()"></button><br><br>
    <button id="exitKeyButton" onclick="window.close()"></button>
    <div id="demoContainer" style="position: absolute; bottom: 20px; left: 20px;">
      <button id="demoModeButton" onclick="enterDemoMode()"></button>
    </div>
  </div>

  <div class="container" id="authContainer" style="display:none;">
    <!-- –í—Ö–æ–¥ -->
    <div id="loginScreen">
      <h3 id="loginTitle"></h3>
      <input id="loginUsername" type="text" placeholder="" />
      <input id="loginPassword" type="password" placeholder="" />
      <div>
        <button id="loginButton" onclick="doLogin()"></button>
      </div>
      <div style="margin-top:10px;">
        <span id="noAccountText"></span> <button class="link-button" id="registerLink" onclick="showRegister()"></button>
      </div>
      <div id="loginMsg"></div>
    </div>

    <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
    <div id="registerScreen" style="display:none;">
      <h3 id="registerTitle"></h3>
      <input id="regUsername" type="text" placeholder="" />
      <input id="regPassword" type="password" placeholder="" />
      <div>
        <button id="registerButton" onclick="doRegister()"></button>
        <button id="backButton" onclick="showLogin()"></button>
      </div>
      <div id="registerMsg"></div>
    </div>
  </div>

  <div id="loadingScreen" style="display:none;">
    <h2 id="loadingText"></h2>
  </div>

  <div id="gameScreen" style="display:none;">
    <button id="shopButton" onclick="showShop()"></button>
    <button id="inventoryButton" onclick="showInventory()"></button>
    <button id="questsButton" onclick="showQuests()"></button>
    <h2 id="level"></h2>
    <h2 id="counter"></h2>
    <h2 id="money"></h2>
    <button id="clickButton" onclick="increment()"></button>
    <button id="achievementsButton" onclick="showAchievements()"></button>
    <button id="promoButton" onclick="showPromo()"></button>
    <button id="exitButton" onclick="doLogout()"></button>
    <p id="currentQuest"></p>
  </div>

  <div id="shopMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="inventoryMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="adminMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="issueClicksMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="issueCookieMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="issueAchievementMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="blockedMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="achievementsMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="promoMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="demoExpiredMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="consoleMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="questsMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="settingsMenu">
    <!-- Dynamic content will be inserted here -->
  </div>

  <div id="pauseOverlay">
    <div id="pauseMenu">
      <h3 id="pauseTitle"></h3>
      <button id="resumeButton" onclick="resumeGame()"></button>
      <button id="settingsButton" onclick="showSettings()"></button>
      <button id="logoutButton" onclick="doLogout()"></button>
    </div>
  </div>

<script>
  var currentUsername = '';
  var count = 0;
  var money = 0;
  var internal_level = 0;
  var isDemo = false;
  var demoUser = null;
  var demoTimerInterval = null;
  var demoTimeLeft = 180; // 3 minutes in seconds
  var isInfiniteDemo = false;
  var demoJustExpired = false;
  var questUpdateInterval = null;
  var isPaused = false;
  var pauseStartTime = null;
  var wasQuestActive = false;
  var wasDemoTimerActive = false;
  var keys = {};
  var currentLanguage = localStorage.getItem('language') || 'ru';

  var translations = {
    ru: {
      title: 'Clicker',
      enterKeyTitle: '–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è',
      enterKeyPlaceholder: '–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á',
      submitKeyButton: '–í–≤–µ—Å—Ç–∏',
      exitKeyButton: '–í—ã–π—Ç–∏',
      demoModeButton: 'Demo Mode',
      loginTitle: '–í—Ö–æ–¥',
      usernamePlaceholder: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
      passwordPlaceholder: '–ü–∞—Ä–æ–ª—å',
      loginButton: '–í–æ–π—Ç–∏',
      noAccountText: '–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?',
      registerLink: '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
      registerTitle: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
      registerButton: '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
      backButton: '–ù–∞–∑–∞–¥',
      loadingText: '–ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∏–∫–µ—Ä–∞',
      shopButton: '–ú–∞–≥–∞–∑–∏–Ω',
      inventoryButton: '–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å',
      questsButton: '–ó–∞–¥–∞–Ω–∏—è',
      level: '–£—Ä–æ–≤–µ–Ω—å: ',
      counter: '–ù–∞–∫–ª–∏–∫–∞–Ω–æ: ',
      money: '–î–µ–Ω—å–≥–∏: ',
      clickButton: '–ö–ª–∏–∫',
      achievementsButton: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
      promoButton: '–ü—Ä–æ–º–æ–∫–æ–¥—ã',
      exitButton: '–í—ã–π—Ç–∏',
      currentQuestNone: '–¢–µ–∫—É—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ: –Ω–µ—Ç',
      pauseTitle: '–ü–∞—É–∑–∞',
      resumeButton: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å',
      settingsButton: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
      logoutButton: '–í—ã–π—Ç–∏',
      keyNoDate: '–ö–ª—é—á –¥–ª—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è –Ω–µ –∑–∞–¥–∞–Ω.',
      keyIncorrect: '–ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á.',
      keyCorrect: '–ö–ª—é—á –≤–µ—Ä–Ω—ã–π ‚Äî –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω.',
      enterUsernamePassword: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –ø–∞—Ä–æ–ª—å',
      invalidUsernamePassword: '–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å',
      userExists: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç',
      registrationSuccess: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!',
      loginSuccess: '–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥!',
      shopTitle: '–ú–∞–≥–∞–∑–∏–Ω',
      smallCookie: '–º–∞–ª–µ–Ω—å–∫–∞—è –ø–µ—á–µ–Ω—å–∫–∞',
      mediumCookie: '–°—Ä–µ–¥–Ω—è—è –ü–µ—á–µ–Ω—å–∫–∞',
      largeCookie: '–ë–æ–ª—å—à–∞—è –ü–µ—á–µ–Ω—å–∫–∞',
      buy: '–ö—É–ø–∏—Ç—å',
      bought: '(–ö—É–ø–ª–µ–Ω–æ)',
      close: '–ó–∞–∫—Ä—ã—Ç—å',
      notEnoughClicks: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–∫–æ–≤!',
      boughtSuccess: '–ö—É–ø–ª–µ–Ω–æ!',
      inventoryTitle: '–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å',
      equipped: ' - –≠–∫–∏–ø–∏—Ä–æ–≤–∞–Ω–æ',
      unequip: '–°–Ω—è—Ç—å',
      equip: '–≠–∫–∏–ø–∏—Ä–æ–≤–∞—Ç—å',
      inventoryEmpty: '–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç!',
      adminPanelTitle: '–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å',
      targetUsernamePlaceholder: '–ò–º—è –∞–∫–∫–∞—É–Ω—Ç–∞',
      issueClicks: '–í—ã–¥–∞—Ç—å –∫–ª–∏–∫–∏',
      issueCookie: '–í—ã–¥–∞—Ç—å –ø–µ—á–µ–Ω—å–∫—É',
      issueAchievement: '–í—ã–¥–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ',
      block: '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å',
      unblock: '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å',
      resetClicks: '–°–±—Ä–æ—Å–∏—Ç—å –∫–ª–∏–∫–∏',
      issueClicksTitle: '–í—ã–¥–∞—Ç—å –∫–ª–∏–∫–∏',
      clickAmountPlaceholder: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤',
      issue: '–í—ã–¥–∞—Ç—å',
      invalidAmount: '–ù–µ–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ!',
      issuedClicks: '–í—ã–¥–∞–Ω–æ {amount} –∫–ª–∏–∫–æ–≤ –¥–ª—è {target}',
      issueCookieTitle: '–í—ã–¥–∞—Ç—å –ø–µ—á–µ–Ω—å–∫—É',
      small: '–ú–∞–ª–µ–Ω—å–∫—É—é',
      medium: '–°—Ä–µ–¥–Ω—é—é',
      large: '–ë–æ–ª—å—à—É—é',
      issuedCookieSmall: '–î–∞–Ω–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –ø–µ—á–µ–Ω—å–∫–∞ –¥–ª—è {target}',
      issuedCookieMedium: '–î–∞–Ω–∞ —Å—Ä–µ–¥–Ω—è—è –ø–µ—á–µ–Ω—å–∫–∞ –¥–ª—è {target}',
      issuedCookieLarge: '–î–∞–Ω–∞ –±–æ–ª—å—à–∞—è –ø–µ—á–µ–Ω—å–∫–∞ –¥–ª—è {target}',
      issueAchievementTitle: '–í—ã–¥–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ',
      achievement100: '100',
      achievement500: '–ü—è—Ç–∏—Ö–∞—Ç–∫–∞',
      achievement1000: '–ö–æ—Å–∞—Ä—å',
      achievement3000: '3 –∫–æ–Ω—É—Å–∞',
      achievement5000: '–ü—è—Ç—ë—Ä–∏–∫',
      achievement10000: '–£ —Ç–µ–±—è –Ω–µ—Ä–≤—ã –∂–µ–ª–µ–∑–Ω—ã–µ?',
      issuedAchievement: '–î–∞–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ {name} –¥–ª—è {target}',
      blocked: '–ê–∫–∫–∞—É–Ω—Ç {target} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω',
      unblocked: '–ê–∫–∫–∞—É–Ω—Ç {target} —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω',
      clicksReset: '–ö–ª–∏–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –¥–ª—è {target}',
      enterUsername: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–∫–∫–∞—É–Ω—Ç–∞!',
      userNotFound: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω!',
      blockedTitle: '–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞',
      blockedText: '–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—ã–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º',
      userNotFoundAlert: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω!',
      demoLabel: 'Demo Mode',
      demoTimer: '–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: ',
      demoExpiredTitle: '–í—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ',
      demoExpiredText: '–í—Ä–µ–º—è –ø—Ä–æ–±–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–∫–æ–Ω—á–µ–Ω–æ',
      ok: '–û–∫',
      achievementsTitle: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
      achieved: '–ü–æ–ª—É—á–µ–Ω–æ',
      notAchieved: '–ù–µ –ø–æ–ª—É—á–µ–Ω–æ',
      achievement100Desc: '100 (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å 100 –∫–ª–∏–∫–æ–≤): ',
      achievement500Desc: '–ü—è—Ç–∏—Ö–∞—Ç–∫–∞ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å 500 –∫–ª–∏–∫–æ–≤): ',
      achievement1000Desc: '–ö–æ—Å–∞—Ä—å (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å 1000 –∫–ª–∏–∫–æ–≤): ',
      achievement3000Desc: '3 –∫–æ–Ω—É—Å–∞ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å 3000 –∫–ª–∏–∫–æ–≤): ',
      achievement5000Desc: '–ü—è—Ç—ë—Ä–∏–∫ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å 5000 –∫–ª–∏–∫–æ–≤): ',
      achievement10000Desc: '–£ —Ç–µ–±—è –Ω–µ—Ä–≤—ã –∂–µ–ª–µ–∑–Ω—ã–µ? (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å 10000 –∫–ª–∏–∫–æ–≤): ',
      promoTitle: '–ü—Ä–æ–º–æ–∫–æ–¥—ã',
      promoPlaceholder: '–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥',
      redeem: '–í–≤–µ—Å—Ç–∏',
      invalidPromo: '–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥!',
      promoSmallCookie: '–ü–æ–ª—É—á–µ–Ω–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –ø–µ—á–µ–Ω—å–∫–∞!',
      promo100Clicks: '–ü–æ–ª—É—á–µ–Ω–æ 100 –∫–ª–∏–∫–æ–≤!',
      promoLargeCookie: '–ü–æ–ª—É—á–µ–Ω–∞ –±–æ–ª—å—à–∞—è –ø–µ—á–µ–Ω—å–∫–∞!',
      consoleTitle: '–ö–æ–Ω—Å–æ–ª—å',
      consolePlaceholder: '–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É',
      execute: '–í–≤–µ—Å—Ç–∏',
      enterCommand: '–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É!',
      invalidCommand: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: {command}',
      setClicksSuccess: '–ö–ª–∏–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ {amount}',
      invalidNumber: '–ù–µ–≤–µ—Ä–Ω–æ–µ —á–∏—Å–ª–æ –≤ –∫–æ–º–∞–Ω–¥–µ!',
      invalidFormat: '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ {format}',
      gaveSmallCookie: '–ü–æ–ª—É—á–µ–Ω–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –ø–µ—á–µ–Ω—å–∫–∞!',
      gaveMediumCookie: '–ü–æ–ª—É—á–µ–Ω–∞ —Å—Ä–µ–¥–Ω—è—è –ø–µ—á–µ–Ω—å–∫–∞!',
      gaveLargeCookie: '–ü–æ–ª—É—á–µ–Ω–∞ –±–æ–ª—å—à–∞—è –ø–µ—á–µ–Ω—å–∫–∞!',
      notInDemo: '–í—ã –Ω–µ –≤ Demo Mode!',
      exitDemo: '–í—ã—Ö–æ–¥ –∏–∑ Demo Mode',
      notInKeyMenu: '–ù–µ –≤ –º–µ–Ω—é —Å –∫–ª—é—á–∞–º–∏!',
      autoPassKey: 'Auto passing key to registration',
      invalidTimeFormat: '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏!',
      demoTimeSet: 'Demo time set to {time}',
      demoTimeInfinity: 'Demo time set to infinity',
      questsTitle: '–ó–∞–¥–∞–Ω–∏—è',
      questCompleted: '‚úÖ',
      questNotCompleted: '‚ùå',
      takeQuest: '–í–∑—è—Ç—å',
      cancelQuest: '–°–Ω—è—Ç—å',
      activeQuest: '–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ!',
      questCancelled: '–ó–∞–¥–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ!',
      questTimeExpired: '–í—Ä–µ–º—è –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ –∏—Å—Ç–µ–∫–ª–æ! –ó–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–ª–µ–Ω–æ.',
      questCompletedSuccess: '–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! –ù–∞–≥—Ä–∞–¥–∞: {reward} –¥–µ–Ω–µ–≥.',
      currentQuest: '–¢–µ–∫—É—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ: –Ω–∞–∫–ª–∏–∫–∞—Ç—å {clicks}/{required} –∫–ª–∏–∫–æ–≤ –∑–∞ {remaining} —Å–µ–∫—É–Ω–¥',
      settingsTitle: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
      uiScaleLabel: '–†–∞–∑–º–µ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:',
      smallScale: '–ú–∞–ª–µ–Ω—å–∫–∏–π',
      mediumScale: '–°—Ä–µ–¥–Ω–∏–π',
      largeScale: '–ë–æ–ª—å—à–æ–π',
      languageLabel: '–Ø–∑—ã–∫:',
      russian: '–†—É—Å—Å–∫–∏–π',
      english: 'English',
      ukrainian: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
      apply: '–ü—Ä–∏–º–µ–Ω–∏—Ç—å',
      achievementUnlocked: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: {name}\n–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ {amount} –∫–ª–∏–∫–æ–≤.',
      promoDisabledInDemo: '–ü—Ä–æ–º–æ–∫–æ–¥—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –≤ Demo Mode',
      demoTimerInfinity: '–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: Infinity',
      questDescTemplate: '–Ω–∞–∫–ª–∏–∫–∞—Ç—å {required} –∫–ª–∏–∫–æ–≤ –∑–∞ {time} —Å–µ–∫—É–Ω–¥'
    },
    en: {
      title: 'Clicker',
      enterKeyTitle: 'Enter key to continue',
      enterKeyPlaceholder: 'Enter key',
      submitKeyButton: 'Submit',
      exitKeyButton: 'Exit',
      demoModeButton: 'Demo Mode',
      loginTitle: 'Login',
      usernamePlaceholder: 'Username',
      passwordPlaceholder: 'Password',
      loginButton: 'Login',
      noAccountText: 'No account?',
      registerLink: 'Register',
      registerTitle: 'Registration',
      registerButton: 'Register',
      backButton: 'Back',
      loadingText: 'Loading clicker',
      shopButton: 'Shop',
      inventoryButton: 'Inventory',
      questsButton: 'Quests',
      level: 'Level: ',
      counter: 'Clicks: ',
      money: 'Money: ',
      clickButton: 'Click',
      achievementsButton: 'Achievements',
      promoButton: 'Promo codes',
      exitButton: 'Logout',
      currentQuestNone: 'Current quest: none',
      pauseTitle: 'Pause',
      resumeButton: 'Resume',
      settingsButton: 'Settings',
      logoutButton: 'Logout',
      keyNoDate: 'Key for today is not set.',
      keyIncorrect: 'Invalid key.',
      keyCorrect: 'Key is correct ‚Äî access granted.',
      enterUsernamePassword: 'Enter username and password',
      invalidUsernamePassword: 'Invalid username or password',
      userExists: 'User already exists',
      registrationSuccess: 'Registration successful!',
      loginSuccess: 'Successful login!',
      shopTitle: 'Shop',
      smallCookie: 'small cookie',
      mediumCookie: 'Medium Cookie',
      largeCookie: 'Large Cookie',
      buy: 'Buy',
      bought: '(Bought)',
      close: 'Close',
      notEnoughClicks: 'Not enough clicks!',
      boughtSuccess: 'Bought!',
      inventoryTitle: 'Inventory',
      equipped: ' - Equipped',
      unequip: 'Unequip',
      equip: 'Equip',
      inventoryEmpty: 'Your inventory is empty!',
      adminPanelTitle: 'Admin Panel',
      targetUsernamePlaceholder: 'Account name',
      issueClicks: 'Issue clicks',
      issueCookie: 'Issue cookie',
      issueAchievement: 'Issue achievement',
      block: 'Block',
      unblock: 'Unblock',
      resetClicks: 'Reset clicks',
      issueClicksTitle: 'Issue clicks',
      clickAmountPlaceholder: 'Number of clicks',
      issue: 'Issue',
      invalidAmount: 'Invalid amount!',
      issuedClicks: 'Issued {amount} clicks to {target}',
      issueCookieTitle: 'Issue cookie',
      small: 'Small',
      medium: 'Medium',
      large: 'Large',
      issuedCookieSmall: 'Issued small cookie to {target}',
      issuedCookieMedium: 'Issued medium cookie to {target}',
      issuedCookieLarge: 'Issued large cookie to {target}',
      issueAchievementTitle: 'Issue achievement',
      achievement100: '100',
      achievement500: 'Five hundred',
      achievement1000: 'Thousand',
      achievement3000: '3 cones',
      achievement5000: 'Five grand',
      achievement10000: 'Do you have iron nerves?',
      issuedAchievement: 'Issued achievement {name} to {target}',
      blocked: 'Account {target} blocked',
      unblocked: 'Account {target} unblocked',
      clicksReset: 'Clicks reset for {target}',
      enterUsername: 'Enter account name!',
      userNotFound: 'User not found!',
      blockedTitle: 'Account Blocked',
      blockedText: 'Your account has been blocked by the Administrator',
      userNotFoundAlert: 'User not found!',
      demoLabel: 'Demo Mode',
      demoTimer: 'Time left: ',
      demoExpiredTitle: 'Time Expired',
      demoExpiredText: 'Trial testing time is over',
      ok: 'Ok',
      achievementsTitle: 'Achievements',
      achieved: 'Achieved',
      notAchieved: 'Not achieved',
      achievement100Desc: '100 (reach 100 clicks): ',
      achievement500Desc: 'Five hundred (reach 500 clicks): ',
      achievement1000Desc: 'Thousand (reach 1000 clicks): ',
      achievement3000Desc: '3 cones (reach 3000 clicks): ',
      achievement5000Desc: 'Five grand (reach 5000 clicks): ',
      achievement10000Desc: 'Do you have iron nerves? (reach 10000 clicks): ',
      promoTitle: 'Promo codes',
      promoPlaceholder: 'Enter promo code',
      redeem: 'Redeem',
      invalidPromo: 'Invalid promo code!',
      promoSmallCookie: 'Received small cookie!',
      promo100Clicks: 'Received 100 clicks!',
      promoLargeCookie: 'Received large cookie!',
      consoleTitle: 'Console',
      consolePlaceholder: 'Enter command',
      execute: 'Execute',
      enterCommand: 'Enter command!',
      invalidCommand: 'Unknown command: {command}',
      setClicksSuccess: 'Clicks set to {amount}',
      invalidNumber: 'Invalid number in command!',
      invalidFormat: 'Invalid command format! Use {format}',
      gaveSmallCookie: 'Received small cookie!',
      gaveMediumCookie: 'Received medium cookie!',
      gaveLargeCookie: 'Received large cookie!',
      notInDemo: 'You are not in Demo Mode!',
      exitDemo: 'Exiting Demo Mode',
      notInKeyMenu: 'Not in key menu!',
      autoPassKey: 'Auto passing key to registration',
      invalidTimeFormat: 'Invalid time format!',
      demoTimeSet: 'Demo time set to {time}',
      demoTimeInfinity: 'Demo time set to infinity',
      questsTitle: 'Quests',
      questCompleted: '‚úÖ',
      questNotCompleted: '‚ùå',
      takeQuest: 'Take',
      cancelQuest: 'Cancel',
      activeQuest: 'You already have an active quest!',
      questCancelled: 'Quest cancelled!',
      questTimeExpired: 'Quest time expired! Quest failed.',
      questCompletedSuccess: 'Quest completed! Reward: {reward} money.',
      currentQuest: 'Current quest: click {clicks}/{required} clicks in {remaining} seconds',
      settingsTitle: 'Settings',
      uiScaleLabel: 'UI Scale:',
      smallScale: 'Small',
      mediumScale: 'Medium',
      largeScale: 'Large',
      languageLabel: 'Language:',
      russian: 'Russian',
      english: 'English',
      ukrainian: 'Ukrainian',
      apply: 'Apply',
      achievementUnlocked: 'Achievement unlocked: {name}\nCongratulations! You reached {amount} clicks.',
      promoDisabledInDemo: 'Promo codes are unavailable in Demo Mode',
      demoTimerInfinity: 'Time left: Infinity',
      questDescTemplate: 'reach {required} clicks in {time} seconds'
    },
    uk: {
      title: '–ö–ª—ñ–∫–µ—Ä',
      enterKeyTitle: '–í–≤–µ–¥—ñ—Ç—å –∫–ª—é—á –¥–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è',
      enterKeyPlaceholder: '–í–≤–µ–¥—ñ—Ç—å –∫–ª—é—á',
      submitKeyButton: '–í–≤–µ—Å—Ç–∏',
      exitKeyButton: '–í–∏–π—Ç–∏',
      demoModeButton: 'Demo Mode',
      loginTitle: '–í—Ö—ñ–¥',
      usernamePlaceholder: "–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
      passwordPlaceholder: '–ü–∞—Ä–æ–ª—å',
      loginButton: '–£–≤—ñ–π—Ç–∏',
      noAccountText: '–ù–µ–º–∞—î –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É?',
      registerLink: '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è',
      registerTitle: '–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è',
      registerButton: '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è',
      backButton: '–ù–∞–∑–∞–¥',
      loadingText: '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª—ñ–∫–µ—Ä–∞',
      shopButton: '–ú–∞–≥–∞–∑–∏–Ω',
      inventoryButton: '–Ü–Ω–≤–µ–Ω—Ç–∞—Ä',
      questsButton: '–ó–∞–≤–¥–∞–Ω–Ω—è',
      level: '–†—ñ–≤–µ–Ω—å: ',
      counter: '–ù–∞–∫–ª—ñ–∫–∞–Ω–æ: ',
      money: '–ì—Ä–æ—à—ñ: ',
      clickButton: '–ö–ª—ñ–∫',
      achievementsButton: '–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è',
      promoButton: '–ü—Ä–æ–º–æ–∫–æ–¥–∏',
      exitButton: '–í–∏–π—Ç–∏',
      currentQuestNone: '–ü–æ—Ç–æ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è: –Ω–µ–º–∞—î',
      pauseTitle: '–ü–∞—É–∑–∞',
      resumeButton: '–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏',
      settingsButton: '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è',
      logoutButton: '–í–∏–π—Ç–∏',
      keyNoDate: '–ö–ª—é—á –¥–ª—è —Å—å–æ–≥–æ–¥–Ω—ñ—à–Ω—å–æ–≥–æ –¥–Ω—è –Ω–µ –∑–∞–¥–∞–Ω–æ.',
      keyIncorrect: '–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–ª—é—á.',
      keyCorrect: '–ö–ª—é—á –≤—ñ—Ä–Ω–∏–π ‚Äî –¥–æ—Å—Ç—É–ø –¥–æ–∑–≤–æ–ª–µ–Ω–æ.',
      enterUsernamePassword: "–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è —Ç–∞ –ø–∞—Ä–æ–ª—å",
      invalidUsernamePassword: "–ù–µ–≤—ñ—Ä–Ω–µ —ñ–º'—è –∞–±–æ –ø–∞—Ä–æ–ª—å",
      userExists: '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ —ñ—Å–Ω—É—î',
      registrationSuccess: '–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞!',
      loginSuccess: '–£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥!',
      shopTitle: '–ú–∞–≥–∞–∑–∏–Ω',
      smallCookie: '–º–∞–ª–µ–Ω—å–∫–µ –ø–µ—á–∏–≤–æ',
      mediumCookie: '–°–µ—Ä–µ–¥–Ω—î –ü–µ—á–∏–≤–æ',
      largeCookie: '–í–µ–ª–∏–∫–µ –ü–µ—á–∏–≤–æ',
      buy: '–ö—É–ø–∏—Ç–∏',
      bought: '(–ö—É–ø–ª–µ–Ω–æ)',
      close: '–ó–∞–∫—Ä–∏—Ç–∏',
      notEnoughClicks: '–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–ª—ñ–∫—ñ–≤!',
      boughtSuccess: '–ö—É–ø–ª–µ–Ω–æ!',
      inventoryTitle: '–Ü–Ω–≤–µ–Ω—Ç–∞—Ä',
      equipped: ' - –ï–∫—ñ–ø—ñ—Ä–æ–≤–∞–Ω–æ',
      unequip: '–ó–Ω—è—Ç–∏',
      equip: '–ï–∫—ñ–ø—ñ—Ä—É–≤–∞—Ç–∏',
      inventoryEmpty: '–í–∞—à —ñ–Ω–≤–µ–Ω—Ç–∞—Ä –ø–æ—Ä–æ–∂–Ω—ñ–π!',
      adminPanelTitle: '–ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å',
      targetUsernamePlaceholder: "–Ü–º'—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É",
      issueClicks: '–í–∏–¥–∞—Ç–∏ –∫–ª—ñ–∫–∏',
      issueCookie: '–í–∏–¥–∞—Ç–∏ –ø–µ—á–∏–≤–æ',
      issueAchievement: '–í–∏–¥–∞—Ç–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è',
      block: '–ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏',
      unblock: '–†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏',
      resetClicks: '–°–∫–∏–Ω—É—Ç–∏ –∫–ª—ñ–∫–∏',
      issueClicksTitle: '–í–∏–¥–∞—Ç–∏ –∫–ª—ñ–∫–∏',
      clickAmountPlaceholder: '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—ñ–∫—ñ–≤',
      issue: '–í–∏–¥–∞—Ç–∏',
      invalidAmount: '–ù–µ–≤—ñ—Ä–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å!',
      issuedClicks: '–í–∏–¥–∞–Ω–æ {amount} –∫–ª—ñ–∫—ñ–≤ –¥–ª—è {target}',
      issueCookieTitle: '–í–∏–¥–∞—Ç–∏ –ø–µ—á–∏–≤–æ',
      small: '–ú–∞–ª–µ–Ω—å–∫–µ',
      medium: '–°–µ—Ä–µ–¥–Ω—î',
      large: '–í–µ–ª–∏–∫–µ',
      issuedCookieSmall: '–í–∏–¥–∞–Ω–æ –º–∞–ª–µ–Ω—å–∫–µ –ø–µ—á–∏–≤–æ –¥–ª—è {target}',
      issuedCookieMedium: '–í–∏–¥–∞–Ω–æ —Å–µ—Ä–µ–¥–Ω—î –ø–µ—á–∏–≤–æ –¥–ª—è {target}',
      issuedCookieLarge: '–í–∏–¥–∞–Ω–æ –≤–µ–ª–∏–∫–µ –ø–µ—á–∏–≤–æ –¥–ª—è {target}',
      issueAchievementTitle: '–í–∏–¥–∞—Ç–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è',
      achievement100: '100',
      achievement500: '–ü\'—è—Ç–∏—Ö–∞—Ç–∫–∞',
      achievement1000: '–ö–æ—Å–∞—Ä',
      achievement3000: '3 –∫–æ–Ω—É—Å–∞',
      achievement5000: '–ü\'—è—Ç—ñ—Ä–∏–∫',
      achievement10000: '–£ —Ç–µ–±–µ –Ω–µ—Ä–≤–∏ –∑–∞–ª—ñ–∑–Ω—ñ?',
      issuedAchievement: '–í–∏–¥–∞–Ω–æ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è {name} –¥–ª—è {target}',
      blocked: '–û–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å {target} –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ',
      unblocked: '–û–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å {target} —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ',
      clicksReset: '–ö–ª—ñ–∫–∏ —Å–∫–∏–Ω—É—Ç–æ –¥–ª—è {target}',
      enterUsername: "–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É!",
      userNotFound: '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π!',
      blockedTitle: '–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É',
      blockedText: '–í–∞—à –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –±—É–ª–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º',
      userNotFoundAlert: '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π!',
      demoLabel: 'Demo Mode',
      demoTimer: '–ó–∞–ª–∏—à–∏–≤—Å—è —á–∞—Å: ',
      demoExpiredTitle: '–ß–∞—Å –º–∏–Ω—É–≤',
      demoExpiredText: '–ß–∞—Å –ø—Ä–æ–±–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–∫—ñ–Ω—á–µ–Ω–æ',
      ok: '–û–∫',
      achievementsTitle: '–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è',
      achieved: '–û—Ç—Ä–∏–º–∞–Ω–æ',
      notAchieved: '–ù–µ –æ—Ç—Ä–∏–º–∞–Ω–æ',
      achievement100Desc: '100 (–¥–æ—Å—è–≥—Ç–∏ 100 –∫–ª—ñ–∫—ñ–≤): ',
      achievement500Desc: '–ü\'—è—Ç–∏—Ö–∞—Ç–∫–∞ (–¥–æ—Å—è–≥—Ç–∏ 500 –∫–ª—ñ–∫—ñ–≤): ',
      achievement1000Desc: '–ö–æ—Å–∞—Ä (–¥–æ—Å—è–≥—Ç–∏ 1000 –∫–ª—ñ–∫—ñ–≤): ',
      achievement3000Desc: '3 –∫–æ–Ω—É—Å–∞ (–¥–æ—Å—è–≥—Ç–∏ 3000 –∫–ª—ñ–∫—ñ–≤): ',
      achievement5000Desc: '–ü\'—è—Ç—ñ—Ä–∏–∫ (–¥–æ—Å—è–≥—Ç–∏ 5000 –∫–ª—ñ–∫—ñ–≤): ',
      achievement10000Desc: '–£ —Ç–µ–±–µ –Ω–µ—Ä–≤–∏ –∑–∞–ª—ñ–∑–Ω—ñ? (–¥–æ—Å—è–≥—Ç–∏ 10000 –∫–ª—ñ–∫—ñ–≤): ',
      promoTitle: '–ü—Ä–æ–º–æ–∫–æ–¥–∏',
      promoPlaceholder: '–í–≤–µ–¥—ñ—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥',
      redeem: '–í–≤–µ—Å—Ç–∏',
      invalidPromo: '–ù–µ–≤—ñ—Ä–Ω–∏–π –ø—Ä–æ–º–æ–∫–æ–¥!',
      promoSmallCookie: '–û—Ç—Ä–∏–º–∞–Ω–æ –º–∞–ª–µ–Ω—å–∫–µ –ø–µ—á–∏–≤–æ!',
      promo100Clicks: '–û—Ç—Ä–∏–º–∞–Ω–æ 100 –∫–ª—ñ–∫—ñ–≤!',
      promoLargeCookie: '–û—Ç—Ä–∏–º–∞–Ω–æ –≤–µ–ª–∏–∫–µ –ø–µ—á–∏–≤–æ!',
      consoleTitle: '–ö–æ–Ω—Å–æ–ª—å',
      consolePlaceholder: '–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É',
      execute: '–í–≤–µ—Å—Ç–∏',
      enterCommand: '–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É!',
      invalidCommand: '–ù–µ–≤—ñ–¥–æ–º–∞ –∫–æ–º–∞–Ω–¥–∞: {command}',
      setClicksSuccess: '–ö–ª—ñ–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ {amount}',
      invalidNumber: '–ù–µ–≤—ñ—Ä–Ω–µ —á–∏—Å–ª–æ –≤ –∫–æ–º–∞–Ω–¥—ñ!',
      invalidFormat: '–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥–∏! –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ {format}',
      gaveSmallCookie: '–û—Ç—Ä–∏–º–∞–Ω–æ –º–∞–ª–µ–Ω—å–∫–µ –ø–µ—á–∏–≤–æ!',
      gaveMediumCookie: '–û—Ç—Ä–∏–º–∞–Ω–æ —Å–µ—Ä–µ–¥–Ω—î –ø–µ—á–∏–≤–æ!',
      gaveLargeCookie: '–û—Ç—Ä–∏–º–∞–Ω–æ –≤–µ–ª–∏–∫–µ –ø–µ—á–∏–≤–æ!',
      notInDemo: '–í–∏ –Ω–µ –≤ Demo Mode!',
      exitDemo: '–í–∏—Ö—ñ–¥ –∑ Demo Mode',
      notInKeyMenu: '–ù–µ –≤ –º–µ–Ω—é –∑ –∫–ª—é—á–∞–º–∏!',
      autoPassKey: 'Auto passing key to registration',
      invalidTimeFormat: '–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç —á–∞—Å—É!',
      demoTimeSet: 'Demo time set to {time}',
      demoTimeInfinity: 'Demo time set to infinity',
      questsTitle: '–ó–∞–≤–¥–∞–Ω–Ω—è',
      questCompleted: '‚úÖ',
      questNotCompleted: '‚ùå',
      takeQuest: '–í–∑—è—Ç–∏',
      cancelQuest: '–ó–Ω—è—Ç–∏',
      activeQuest: '–£ –≤–∞—Å –≤–∂–µ —î –∞–∫—Ç–∏–≤–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è!',
      questCancelled: '–ó–∞–≤–¥–∞–Ω–Ω—è —Å–∫–∞—Å–æ–≤–∞–Ω–æ!',
      questTimeExpired: '–ß–∞—Å –Ω–∞ –∑–∞–≤–¥–∞–Ω–Ω—è –º–∏–Ω—É–≤! –ó–∞–≤–¥–∞–Ω–Ω—è –ø—Ä–æ–≤–∞–ª–µ–Ω–æ.',
      questCompletedSuccess: '–ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ! –ù–∞–≥–æ—Ä–æ–¥–∞: {reward} –≥—Ä–æ—à–µ–π.',
      currentQuest: '–ü–æ—Ç–æ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è: –Ω–∞–∫–ª—ñ–∫–∞—Ç–∏ {clicks}/{required} –∫–ª—ñ–∫—ñ–≤ –∑–∞ {remaining} —Å–µ–∫—É–Ω–¥',
      settingsTitle: '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è',
      uiScaleLabel: '–†–æ–∑–º—ñ—Ä —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:',
      smallScale: '–ú–∞–ª–µ–Ω—å–∫–∏–π',
      mediumScale: '–°–µ—Ä–µ–¥–Ω—ñ–π',
      largeScale: '–í–µ–ª–∏–∫–∏–π',
      languageLabel: '–ú–æ–≤–∞:',
      russian: '–†–æ—Å—ñ–π—Å—å–∫–∞',
      english: '–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞',
      ukrainian: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
      apply: '–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏',
      achievementUnlocked: '–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ: {name}\n–í—ñ—Ç–∞—î–º–æ! –í–∏ –¥–æ—Å—è–≥–ª–∏ {amount} –∫–ª—ñ–∫—ñ–≤.',
      promoDisabledInDemo: '–ü—Ä–æ–º–æ–∫–æ–¥–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ –≤ Demo Mode',
      demoTimerInfinity: '–ó–∞–ª–∏—à–∏–≤—Å—è —á–∞—Å: Infinity',
      questDescTemplate: '–¥–æ—Å—è–≥—Ç–∏ {required} –∫–ª—ñ–∫—ñ–≤ –∑–∞ {time} —Å–µ–∫—É–Ω–¥'
    }
  };

  function init() {
    var storedKeys = localStorage.getItem('clickerKeys');
    if (storedKeys) {
      keys = JSON.parse(storedKeys);
    } else {
var encoded_keys = {
  // üîπ –°—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏
  '2025-10-01': 'TFlTVUtBLUtPVC0x',        // LYSUKA-KOT-1
  '2025-10-02': 'TFlTVUtBLUtPVC0xMjM=',     // LYSUKA-KOT-123
  '2025-10-03': 'TFlTVUtBLUtPVC0xMjM0',     // LYSUKA-KOT-1234
  '2025-10-04': 'TFlTVUtBLUtPVC0xMjM1',     // LYSUKA-KOT-1235
  '2025-10-05': 'TFlTVUtBLUtPVC0xMjQz',     // LYSUKA-KOT-1243
  '2025-10-06': 'TFlTVUtBLUtPVC01NDMyMQ==', // LYSUKA-KOT-54321
  '2025-10-07': 'TFlTVUtBLUtPVC00NTc2',     // LYSUKA-KOT-4576
  '2025-10-08': 'TFlTVUtBLUtPVC04Mzc0',     // LYSUKA-KOT-8374
  '2025-10-09': 'TFlTVUtBLUtPVC05MTM1',     // LYSUKA-KOT-9135
  '2025-10-10': 'TFlTVUtBLUtPVC0xMA==',     // LYSUKA-KOT-10

  // üîπ –ù–æ–≤—ã–µ –∫–ª—é—á–∏ (—Å 24.10.2025 –ø–æ 23.11.2025)
  '2025-10-24': 'TFlTVUtBLUtPVC0xNzk=',   // LYSUKA-KOT-179
  '2025-10-25': 'TFlTVUtBLUtPVC00NzU=',   // LYSUKA-KOT-475
  '2025-10-26': 'TFlTVUtBLUtPVC01MTk=',   // LYSUKA-KOT-519
  '2025-10-27': 'TFlTVUtBLUtPVC05Mzg=',   // LYSUKA-KOT-938
  '2025-10-28': 'TFlTVUtBLUtPVC04NDM=',   // LYSUKA-KOT-843
  '2025-10-29': 'TFlTVUtBLUtPVC0xMzA5',   // LYSUKA-KOT-1309
  '2025-10-30': 'TFlTVUtBLUtPVC01Mzc=',   // LYSUKA-KOT-537
  '2025-10-31': 'TFlTVUtBLUtPVC00ODEw',   // LYSUKA-KOT-4810
  '2025-11-01': 'TFlTVUtBLUtPVC03MTA=',   // LYSUKA-KOT-710
  '2025-11-02': 'TFlTVUtBLUtPVC0zOTU=',   // LYSUKA-KOT-395
  '2025-11-03': 'TFlTVUtBLUtPVC03MDQ4',   // LYSUKA-KOT-7048
  '2025-11-04': 'TFlTVUtBLUtPVC05ODU=',   // LYSUKA-KOT-985
  '2025-11-05': 'TFlTVUtBLUtPVC0xODM5',   // LYSUKA-KOT-1839
  '2025-11-06': 'TFlTVUtBLUtPVC01Mzkx',   // LYSUKA-KOT-5391
  '2025-11-07': 'TFlTVUtBLUtPVC05MTA3',   // LYSUKA-KOT-9107
  '2025-11-08': 'TFlTVUtBLUtPVC04NTQ=',   // LYSUKA-KOT-854
  '2025-11-09': 'TFlTVUtBLUtPVC0zOTEw',   // LYSUKA-KOT-3910
  '2025-11-10': 'TFlTVUtBLUtPVC01NDA=',   // LYSUKA-KOT-540
  '2025-11-11': 'TFlTVUtBLUtPVC05ODM=',   // LYSUKA-KOT-983
  '2025-11-12': 'TFlTVUtBLUtPVC0xODc=',   // LYSUKA-KOT-187
  '2025-11-13': 'TFlTVUtBLUtPVC0zNTc=',   // LYSUKA-KOT-357
  '2025-11-14': 'TFlTVUtBLUtPVC03NDE=',   // LYSUKA-KOT-741
  '2025-11-15': 'TFlTVUtBLUtPVC0xOTM4',   // LYSUKA-KOT-1938
  '2025-11-16': 'TFlTVUtBLUtPVC01ODA=',   // LYSUKA-KOT-580
  '2025-11-17': 'TFlTVUtBLUtPVC03MTk=',   // LYSUKA-KOT-719
  '2025-11-18': 'TFlTVUtBLUtPVC04NDUz',   // LYSUKA-KOT-8453
  '2025-11-19': 'TFlTVUtBLUtPVC00MDc=',   // LYSUKA-KOT-407
  '2025-11-20': 'TFlTVUtBLUtPVC05MzE=',   // LYSUKA-KOT-931
  '2025-11-21': 'TFlTVUtBLUtPVC0xODA=',   // LYSUKA-KOT-180
  '2025-11-22': 'TFlTVUtBLUtPVC03NTk=',   // LYSUKA-KOT-759
  '2025-11-23': 'TFlTVUtBLUtPVC04Nzc=',   // LYSUKA-KOT-877
};

      keys = {};
      for (var date in encoded_keys) {
        keys[date] = atob(encoded_keys[date]);
      }
      localStorage.setItem('clickerKeys', JSON.stringify(keys));
    }
    document.getElementById('keyContainer').style.display = 'block';
    document.getElementById('authContainer').style.display = 'none';
    document.getElementById('loadingScreen').display = 'none';
    document.getElementById('gameScreen').style.display = 'none';
    document.addEventListener('keydown', function(event) {
      if (event.key === 'f' || event.key === 'F') {
        toggleConsole();
      }
    });
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape' && document.getElementById('gameScreen').style.display !== 'none' && !isPaused) {
        pauseGame();
      } else if (event.key === 'Escape' && isPaused) {
        resumeGame();
      }
    });
    // Apply saved UI scale
    var savedScale = localStorage.getItem('uiScale') || '1';
    document.body.style.transform = `scale(${savedScale})`;
    document.body.style.transformOrigin = '0 0';
    document.body.style.width = `${100 / parseFloat(savedScale)}%`;
    document.body.style.height = `${100 / parseFloat(savedScale)}%`;

    // Apply language
    applyStaticTexts();
    updateQuestDescriptions();
  }

  function applyStaticTexts() {
    var t = translations[currentLanguage];
    document.title = t.title;
    document.getElementById('enterKeyTitle').innerText = t.enterKeyTitle;
    document.getElementById('inputText').placeholder = t.enterKeyPlaceholder;
    document.getElementById('submitKeyButton').innerText = t.submitKeyButton;
    document.getElementById('exitKeyButton').innerText = t.exitKeyButton;
    document.getElementById('demoModeButton').innerText = t.demoModeButton;
    document.getElementById('loginTitle').innerText = t.loginTitle;
    document.getElementById('loginUsername').placeholder = t.usernamePlaceholder;
    document.getElementById('loginPassword').placeholder = t.passwordPlaceholder;
    document.getElementById('loginButton').innerText = t.loginButton;
    document.getElementById('noAccountText').innerText = t.noAccountText;
    document.getElementById('registerLink').innerText = t.registerLink;
    document.getElementById('registerTitle').innerText = t.registerTitle;
    document.getElementById('regUsername').placeholder = t.usernamePlaceholder;
    document.getElementById('regPassword').placeholder = t.passwordPlaceholder;
    document.getElementById('registerButton').innerText = t.registerButton;
    document.getElementById('backButton').innerText = t.backButton;
    document.getElementById('shopButton').innerText = t.shopButton;
    document.getElementById('inventoryButton').innerText = t.inventoryButton;
    document.getElementById('questsButton').innerText = t.questsButton;
    document.getElementById('clickButton').innerText = t.clickButton;
    document.getElementById('achievementsButton').innerText = t.achievementsButton;
    document.getElementById('promoButton').innerText = t.promoButton;
    document.getElementById('exitButton').innerText = t.exitButton;
    document.getElementById('pauseTitle').innerText = t.pauseTitle;
    document.getElementById('resumeButton').innerText = t.resumeButton;
    document.getElementById('settingsButton').innerText = t.settingsButton;
    document.getElementById('logoutButton').innerText = t.logoutButton;
  }

  function setLanguage(lang) {
    if (lang !== currentLanguage) {
      currentLanguage = lang;
      localStorage.setItem('language', lang);
      updateAllUI();
    }
  }

  function updateAllUI() {
    var t = translations[currentLanguage];
    applyStaticTexts();
    updateQuestDescriptions();

    if (document.getElementById('gameScreen').style.display !== 'none') {
      updateLevel();
      updateMoney();
      updateCounter();
      updateCurrentQuest();
    }

    // Update demo elements if in demo
    var demoLabel = document.getElementById('demoLabel');
    if (demoLabel) {
      demoLabel.innerText = t.demoLabel;
    }
    var demoTimer = document.getElementById('demoTimer');
    if (demoTimer) {
      if (isInfiniteDemo) {
        demoTimer.innerText = t.demoTimerInfinity;
      } else {
        updateDemoTimer();
      }
    }

    // Re-render open menus
    if (document.getElementById('shopMenu').style.display === 'block') {
      renderShop();
    }
    if (document.getElementById('inventoryMenu').style.display === 'block') {
      renderInventory();
    }
    if (document.getElementById('adminMenu').style.display === 'block') {
      renderAdminPanel();
    }
    if (document.getElementById('issueClicksMenu').style.display === 'block') {
      showIssueClicks();
    }
    if (document.getElementById('issueCookieMenu').style.display === 'block') {
      showIssueCookie();
    }
    if (document.getElementById('issueAchievementMenu').style.display === 'block') {
      showIssueAchievement();
    }
    if (document.getElementById('blockedMenu').style.display === 'block') {
      renderBlocked();
    }
    if (document.getElementById('achievementsMenu').style.display === 'block') {
      renderAchievements();
    }
    if (document.getElementById('promoMenu').style.display === 'block') {
      renderPromo();
    }
    if (document.getElementById('demoExpiredMenu').style.display === 'block') {
      renderDemoExpired();
    }
    if (document.getElementById('consoleMenu').style.display === 'block') {
      renderConsole();
    }
    if (document.getElementById('questsMenu').style.display === 'block') {
      renderQuests();
    }
    if (document.getElementById('settingsMenu').style.display === 'block') {
      renderSettings();
    }
  }

  function showMsg(id, msg, success) {
    var elem = document.getElementById(id);
    elem.innerText = msg;
    elem.style.color = success ? 'green' : 'red';
  }

  function showRegister() {
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('registerScreen').style.display = 'block';
    document.getElementById('loginMsg').innerText = '';
  }

  function showLogin() {
    document.getElementById('registerScreen').style.display = 'none';
    document.getElementById('loginScreen').style.display = 'block';
    document.getElementById('registerMsg').innerText = '';
  }

  function enterDemoMode() {
    isDemo = true;
    demoUser = {
      count: "0",
      money: "0",
      internal_level: 0,
      has_small_cookie: 0,
      equipped_small_cookie: 0,
      has_medium_cookie: 0,
      equipped_medium_cookie: 0,
      has_large_cookie: 0,
      equipped_large_cookie: 0,
      is_blocked: 0,
      achieved_100: 0,
      achieved_500: 0,
      achieved_1000: 0,
      achieved_3000: 0,
      achieved_5000: 0,
      achieved_10000: 0,
      active_quest: null,
      completed_quests: []
    };
    currentUsername = 'Demo';
    count = 0;
    money = 0;
    internal_level = 0;
    document.getElementById('keyContainer').classList.add('fade-out');
    setTimeout(() => {
      document.getElementById('keyContainer').style.display = 'none';
      showGame();
    }, 500);
  }

  function dragElement(el) {
    var pos1 = 0,
      pos2 = 0,
      pos3 = 0,
      pos4 = 0;
    el.querySelector('h3').onpointerdown = function() {
      dragMouseDown();
    };

    function dragMouseDown(e) {
      e = e || window.event;
      e.preventDefault();
      pos3 = e.clientX;
      pos4 = e.clientY;

      document.onpointerup = closeDragElement;
      document.onpointermove = elementDrag;
    }

    function elementDrag(e) {
      e = e || window.event;
      e.preventDefault();
      pos1 = pos3 - e.clientX;
      pos2 = pos4 - e.clientY;
      pos3 = e.clientX;
      pos4 = e.clientY;

      el.style.top = el.offsetTop - pos2 + 'px';
      el.style.left = el.offsetLeft - pos1 + 'px';
    }

    function closeDragElement() {
      document.onpointerup = null;
      document.onpointermove = null;
    }
  }

  function trim(str) {
    return str.replace(/^\s+|\s+$/g, '');
  }

  function checkKey() {
    var t = translations[currentLanguage];
    var currentDate = new Date().toISOString().split('T')[0];
    var enteredKey = trim(document.getElementById('inputText').value);
    var expectedKey = keys[currentDate];
    if (!expectedKey) {
      alert(t.keyNoDate);
      return;
    }
    if (enteredKey === expectedKey) {
      alert(t.keyCorrect);
      document.getElementById('keyContainer').classList.add('fade-out');
      setTimeout(() => {
        document.getElementById('keyContainer').style.display = 'none';
        document.getElementById('authContainer').style.display = 'block';
        setTimeout(() => {
          document.getElementById('authContainer').classList.add('fade-in');
        }, 10);
      }, 500);
    } else {
      alert(t.keyIncorrect);
    }
  }

  var quests = [
    { id: 1, clicksRequired: 50, timeLimit: 60, reward: 100, description: '' },
    { id: 2, clicksRequired: 100, timeLimit: 120, reward: 200, description: '' },
    { id: 3, clicksRequired: 200, timeLimit: 180, reward: 300, description: '' }
  ];

  var questStartTime = 0;
  var questClicks = 0;
  var questTimerInterval = null;

  function updateQuestDescriptions() {
    var t = translations[currentLanguage];
    quests.forEach(function(quest) {
      quest.description = t.questDescTemplate.replace('{required}', quest.clicksRequired).replace('{time}', quest.timeLimit);
    });
  }

  function formatInternalLevel(level) {
    return (level / 100).toFixed(2);
  }

  function showLoading() {
    var t = translations[currentLanguage];
    document.getElementById('authContainer').classList.remove('fade-in');
    setTimeout(() => {
      document.getElementById('authContainer').style.display = 'none';
      document.getElementById('loadingScreen').style.display = 'block';
      document.getElementById('loadingScreen').classList.add('visible');
    }, 500);
    var dots = 0;
    var loadingInterval = setInterval(function() {
      dots = (dots + 1) % 4; // Cycle from 0 to 3
      var text = t.loadingText;
      for (var i = 0; i < dots; i++) {
        text += '.';
      }
      document.getElementById('loadingText').innerText = text;
    }, 500); // Change every 0.5 seconds

    setTimeout(function() {
      clearInterval(loadingInterval); // Stop animation
      showGame();
    }, 5000);
  }

  function showBlocked() {
    renderBlocked();
    document.getElementById('authContainer').style.display = 'none';
    document.getElementById('blockedMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('blockedMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('blockedMenu'));
  }

  function renderBlocked() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.blockedTitle + '</h3>';
    content += '<p>' + t.blockedText + '</p>';
    content += '<button onclick="doLogout()">' + t.logoutButton + '</button>';
    document.getElementById('blockedMenu').innerHTML = content;
  }

  function showGame() {
    var t = translations[currentLanguage];
    document.getElementById('loadingScreen').style.display = 'none';
    document.getElementById('gameScreen').style.display = 'block';
    setTimeout(() => { document.getElementById('gameScreen').classList.add('visible'); }, 10);
    var user = getCurrentUser();
    if (user) {
      count = parseFloat(user.count) || 0;
      money = parseFloat(user.money) || 0;
      internal_level = user.level || 0;
      updateCounter();
      updateMoney();
      updateLevel();
      updateCurrentQuest();
      if (user.active_quest !== null) {
        startQuestTimer();
        startQuestUpdateInterval();
      }
    } else {
      alert(t.userNotFoundAlert);
    }

    // Remove admin button if exists
    var existingAdminButton = document.getElementById('adminButton');
    if (existingAdminButton) {
      existingAdminButton.parentNode.removeChild(existingAdminButton);
    }

    // Add admin button only for Admin
    if (currentUsername === 'Admin') {
      var adminButton = document.createElement('button');
      adminButton.id = 'adminButton';
      adminButton.innerText = t.adminPanelTitle;
      adminButton.onclick = showAdminPanel;
      adminButton.style.position = 'absolute';
      adminButton.style.top = '0px';
      adminButton.style.right = '10px';
      adminButton.style.fontSize = '16px';
      adminButton.style.padding = '8px 16px';
      adminButton.style.backgroundColor = '#FF00FF'; // Magenta for admin
      document.getElementById('gameScreen').appendChild(adminButton);
    }

    // Remove demo elements if exist
    var existingDemoLabel = document.getElementById('demoLabel');
    if (existingDemoLabel) {
      existingDemoLabel.parentNode.removeChild(existingDemoLabel);
    }
    var existingDemoTimer = document.getElementById('demoTimer');
    if (existingDemoTimer) {
      existingDemoTimer.parentNode.removeChild(existingDemoTimer);
    }

    // Reset positions to default every time
    document.getElementById('shopButton').style.top = '0px';
    document.getElementById('inventoryButton').style.top = '40px';
    document.getElementById('questsButton').style.top = '80px';

    // Reset promo button to default
    document.getElementById('promoButton').disabled = false;
    document.getElementById('promoButton').style.backgroundColor = '#2196F3';
    document.getElementById('promoButton').onclick = showPromo;

    if (isDemo) {
      var demoLabel = document.createElement('div');
      demoLabel.id = 'demoLabel';
      demoLabel.innerText = t.demoLabel;
      demoLabel.style.position = 'absolute';
      demoLabel.style.top = '10px';
      demoLabel.style.left = '10px';
      demoLabel.style.color = 'blue';
      demoLabel.style.fontSize = '18px';
      demoLabel.style.fontWeight = 'bold';
      document.getElementById('gameScreen').appendChild(demoLabel);

      var demoTimer = document.createElement('div');
      demoTimer.id = 'demoTimer';
      demoTimer.style.position = 'absolute';
      demoTimer.style.top = '40px';
      demoTimer.style.left = '10px';
      demoTimer.style.color = 'red';
      demoTimer.style.fontSize = '16px';
      demoTimer.style.fontWeight = 'bold';
      document.getElementById('gameScreen').appendChild(demoTimer);
      updateDemoTimer();
      if (!isInfiniteDemo) {
        demoTimerInterval = setInterval(updateDemoTimer, 1000);
      } else {
        document.getElementById('demoTimer').innerText = t.demoTimerInfinity;
      }

      // Shift buttons down
      document.getElementById('shopButton').style.top = '60px';
      document.getElementById('inventoryButton').style.top = '100px';
      document.getElementById('questsButton').style.top = '140px';

      // Disable promo in demo
      document.getElementById('promoButton').disabled = true;
      document.getElementById('promoButton').style.backgroundColor = 'gray';
      document.getElementById('promoButton').onclick = function() { alert(t.promoDisabledInDemo); };
    }
  }

  function updateDemoTimer() {
    var t = translations[currentLanguage];
    if (demoTimeLeft <= 0) {
      clearInterval(demoTimerInterval);
      showDemoExpired();
      return;
    }
    var minutes = Math.floor(demoTimeLeft / 60);
    var seconds = demoTimeLeft % 60;
    document.getElementById('demoTimer').innerText = t.demoTimer + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
    demoTimeLeft--;
  }

  function showDemoExpired() {
    renderDemoExpired();
    document.getElementById('demoExpiredMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('demoExpiredMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('demoExpiredMenu'));
    // Hide game screen
    document.getElementById('gameScreen').classList.remove('visible');
    setTimeout(() => { document.getElementById('gameScreen').style.display = 'none'; }, 500);
    demoJustExpired = true;
  }

  function renderDemoExpired() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.demoExpiredTitle + '</h3>';
    content += '<p>' + t.demoExpiredText + '</p>';
    content += '<button onclick="returnToKey()">' + t.ok + '</button>';
    document.getElementById('demoExpiredMenu').innerHTML = content;
  }

  function returnToKey() {
    document.getElementById('demoExpiredMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('demoExpiredMenu').style.display = 'none'; }, 500);
    document.getElementById('gameScreen').classList.remove('visible');
    setTimeout(() => { document.getElementById('gameScreen').style.display = 'none'; }, 500);
    document.getElementById('keyContainer').style.display = 'block';
    document.getElementById('keyContainer').style.opacity = '1';
    document.getElementById('keyContainer').style.transform = 'translateY(0)';
    document.getElementById('keyContainer').classList.remove('fade-out');
    document.getElementById('authContainer').style.display = 'none';
    document.getElementById('authContainer').classList.remove('fade-in');
    isDemo = false;
    demoUser = null;
    currentUsername = '';
    count = 0;
    money = 0;
    internal_level = 0;
    if (demoTimerInterval) clearInterval(demoTimerInterval);
    isInfiniteDemo = false;
  }

  function updateCounter() {
    var t = translations[currentLanguage];
    document.getElementById('counter').innerText = t.counter + count;
  }

  function updateMoney() {
    var t = translations[currentLanguage];
    document.getElementById('money').innerText = t.money + money;
  }

  function updateLevel() {
    var t = translations[currentLanguage];
    document.getElementById('level').innerText = t.level + formatInternalLevel(internal_level);
  }

  function showShop() {
    renderShop();
    document.getElementById('shopMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('shopMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('shopMenu'));
  }

  function renderShop() {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    var content = '<h3>' + t.shopTitle + '</h3>';
    content += '<p>' + t.smallCookie + ' - 300 clicks</p>';
    if (!user.has_small_cookie) {
      content += '<button onclick="buySmallCookie()">' + t.buy + '</button>';
    } else {
      content += '<p>' + t.bought + '</p>';
    }
    content += '<p>' + t.mediumCookie + ' - 700 clicks</p>';
    if (!user.has_medium_cookie) {
      content += '<button onclick="buyMediumCookie()">' + t.buy + '</button>';
    } else {
      content += '<p>' + t.bought + '</p>';
    }
    content += '<p>' + t.largeCookie + ' - 1000 clicks</p>';
    if (!user.has_large_cookie) {
      content += '<button onclick="buyLargeCookie()">' + t.buy + '</button>';
    } else {
      content += '<p>' + t.bought + '</p>';
    }
    content += '<br><button onclick="closeShop()">' + t.close + '</button>';
    document.getElementById('shopMenu').innerHTML = content;
  }

  function closeShop() {
    document.getElementById('shopMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('shopMenu').style.display = 'none'; }, 500); // Longer transition
  }

  async function buySmallCookie() {
    const t = translations[currentLanguage];
    if (count >= 300) {
      count -= 300;
      userData.count = count;
      userData.has_small_cookie = 1;
      await update(ref(db, 'users/' + currentUid), { count: count, has_small_cookie: 1 });
      updateCounter();
      alert(t.boughtSuccess);
      renderShop();
    } else {
      alert(t.notEnoughClicks);
    }
  }

  async function buyMediumCookie() {
    const t = translations[currentLanguage];
    if (count >= 700) {
      count -= 700;
      userData.count = count;
      userData.has_medium_cookie = 1;
      await update(ref(db, 'users/' + currentUid), { count: count, has_medium_cookie: 1 });
      updateCounter();
      alert(t.boughtSuccess);
      renderShop();
    } else {
      alert(t.notEnoughClicks);
    }
  }

  async function buyLargeCookie() {
    const t = translations[currentLanguage];
    if (count >= 1000) {
      count -= 1000;
      userData.count = count;
      userData.has_large_cookie = 1;
      await update(ref(db, 'users/' + currentUid), { count: count, has_large_cookie: 1 });
      updateCounter();
      alert(t.boughtSuccess);
      renderShop();
    } else {
      alert(t.notEnoughClicks);
    }
  }

  function showInventory() {
    renderInventory();
    document.getElementById('inventoryMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('inventoryMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('inventoryMenu'));
  }

  function renderInventory() {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    var content = '<h3>' + t.inventoryTitle + '</h3>';
    var hasItems = false;
    if (user.has_small_cookie) {
      hasItems = true;
      content += '<p>' + t.smallCookie;
      if (user.equipped_small_cookie) {
        content += t.equipped + ' <button onclick="unequipSmallCookie()">' + t.unequip + '</button>';
      } else {
        content += ' <button onclick="equipSmallCookie()">' + t.equip + '</button>';
      }
      content += '</p>';
    }
    if (user.has_medium_cookie) {
      hasItems = true;
      content += '<p>' + t.mediumCookie;
      if (user.equipped_medium_cookie) {
        content += t.equipped + ' <button onclick="unequipMediumCookie()">' + t.unequip + '</button>';
      } else {
        content += ' <button onclick="equipMediumCookie()">' + t.equip + '</button>';
      }
      content += '</p>';
    }
    if (user.has_large_cookie) {
      hasItems = true;
      content += '<p>' + t.largeCookie;
      if (user.equipped_large_cookie) {
        content += t.equipped + ' <button onclick="unequipLargeCookie()">' + t.unequip + '</button>';
      } else {
        content += ' <button onclick="equipLargeCookie()">' + t.equip + '</button>';
      }
      content += '</p>';
    }
    if (!hasItems) {
      content += '<p>' + t.inventoryEmpty + '</p>';
    }
    content += '<button onclick="closeInventory()">' + t.close + '</button>';
    document.getElementById('inventoryMenu').innerHTML = content;
  }

  function closeInventory() {
    document.getElementById('inventoryMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('inventoryMenu').style.display = 'none'; }, 500);
  }

  async function equipSmallCookie() {
    userData.equipped_small_cookie = 1;
    await update(ref(db, 'users/' + currentUid), { equipped_small_cookie: 1 });
    renderInventory();
  }

  async function unequipSmallCookie() {
    userData.equipped_small_cookie = 0;
    await update(ref(db, 'users/' + currentUid), { equipped_small_cookie: 0 });
    renderInventory();
  }

  async function equipMediumCookie() {
    userData.equipped_medium_cookie = 1;
    await update(ref(db, 'users/' + currentUid), { equipped_medium_cookie: 1 });
    renderInventory();
  }

  async function unequipMediumCookie() {
    userData.equipped_medium_cookie = 0;
    await update(ref(db, 'users/' + currentUid), { equipped_medium_cookie: 0 });
    renderInventory();
  }

  async function equipLargeCookie() {
    userData.equipped_large_cookie = 1;
    await update(ref(db, 'users/' + currentUid), { equipped_large_cookie: 1 });
    renderInventory();
  }

  async function unequipLargeCookie() {
    userData.equipped_large_cookie = 0;
    await update(ref(db, 'users/' + currentUid), { equipped_large_cookie: 0 });
    renderInventory();
  }

  function showAdminPanel() {
    renderAdminPanel();
    document.getElementById('adminMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('adminMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('adminMenu'));
  }

  function renderAdminPanel() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.adminPanelTitle + '</h3>';
    content += '<input id="targetUsername" type="text" placeholder="' + t.targetUsernamePlaceholder + '" />';
    content += '<br><button onclick="showIssueClicks()">' + t.issueClicks + '</button><br>';
    content += '<button onclick="showIssueCookie()">' + t.issueCookie + '</button><br>';
    content += '<button onclick="showIssueAchievement()">' + t.issueAchievement + '</button><br>';
    content += '<button onclick="blockAccount()">' + t.block + '</button>';
    content += '<button onclick="unblockAccount()" style="margin-left:10px;">' + t.unblock + '</button><br>';
    content += '<button onclick="resetCount()">' + t.resetClicks + '</button><br>';
    content += '<button onclick="closeAdminPanel()">' + t.close + '</button>';
    document.getElementById('adminMenu').innerHTML = content;
  }

  function closeAdminPanel() {
    document.getElementById('adminMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('adminMenu').style.display = 'none'; }, 500);
  }

  function showIssueClicks() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.issueClicksTitle + '</h3>';
    content += '<input id="clickAmount" type="number" placeholder="' + t.clickAmountPlaceholder + '" />';
    content += '<br><button onclick="confirmIssueClicks()">' + t.issue + '</button>';
    content += '<button onclick="closeIssueClicks()">' + t.close + '</button>';
    document.getElementById('issueClicksMenu').innerHTML = content;
    document.getElementById('issueClicksMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('issueClicksMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('issueClicksMenu'));
  }

  function closeIssueClicks() {
    document.getElementById('issueClicksMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('issueClicksMenu').style.display = 'none'; }, 500);
  }

  function showIssueCookie() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.issueCookieTitle + '</h3>';
    content += '<button onclick="confirmIssueCookie(1)">' + t.small + '</button>';
    content += '<button onclick="confirmIssueCookie(2)">' + t.medium + '</button>';
    content += '<button onclick="confirmIssueCookie(3)">' + t.large + '</button>';
    content += '<br><button onclick="closeIssueCookie()">' + t.close + '</button>';
    document.getElementById('issueCookieMenu').innerHTML = content;
    document.getElementById('issueCookieMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('issueCookieMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('issueCookieMenu'));
  }

  function closeIssueCookie() {
    document.getElementById('issueCookieMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('issueCookieMenu').style.display = 'none'; }, 500);
  }

  function showIssueAchievement() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.issueAchievementTitle + '</h3>';
    content += '<button onclick="confirmIssueAchievement(1)">' + t.achievement100 + '</button>';
    content += '<button onclick="confirmIssueAchievement(2)">' + t.achievement500 + '</button>';
    content += '<button onclick="confirmIssueAchievement(3)">' + t.achievement1000 + '</button>';
    content += '<button onclick="confirmIssueAchievement(4)">' + t.achievement3000 + '</button>';
    content += '<button onclick="confirmIssueAchievement(5)">' + t.achievement5000 + '</button>';
    content += '<button onclick="confirmIssueAchievement(6)">' + t.achievement10000 + '</button>';
    content += '<br><button onclick="closeIssueAchievement()">' + t.close + '</button>';
    document.getElementById('issueAchievementMenu').innerHTML = content;
    document.getElementById('issueAchievementMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('issueAchievementMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('issueAchievementMenu'));
  }

  function closeIssueAchievement() {
    document.getElementById('issueAchievementMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('issueAchievementMenu').style.display = 'none'; }, 500);
  }

  async function getTargetUser() {
    var t = translations[currentLanguage];
    var target = trim(document.getElementById('targetUsername').value);
    if (target === '') {
      alert(t.enterUsername);
      return null;
    }
    if (isDemo && target === 'Demo') {
      return 'Demo'; // Special handling for demo
    }
    const user = await getUserByUsername(target);
    if (!user) {
      alert(t.userNotFound);
      return null;
    }
    return target;
  }

  async function getUser(target) {
    if (isDemo && target === 'Demo') {
      return demoUser;
    }
    return await getUserByUsername(target);
  }

  async function confirmIssueClicks() {
    var t = translations[currentLanguage];
    var target = await getTargetUser();
    if (target) {
      var amountStr = document.getElementById('clickAmount').value;
      var amount = parseInt(amountStr);
      if (isNaN(amount) || amount <= 0) {
        alert(t.invalidAmount);
        return;
      }
      var user = await getUser(target);
      var currentCount = parseFloat(user.count) || 0;
      var newCount = currentCount + amount;
      var uid = await getUidByUsername(target);
      await update(ref(db, 'users/' + uid), { count: newCount });
      checkAchievements(target);
      alert(t.issuedClicks.replace('{amount}', amount).replace('{target}', target));
      if (target === currentUsername) {
        count = newCount;
        updateCounter();
      }
      closeIssueClicks();
    }
  }

  async function confirmIssueCookie(choice) {
    var t = translations[currentLanguage];
    var target = await getTargetUser();
    if (target) {
      var uid = await getUidByUsername(target);
      var updates = {};
      if (choice === 1) {
        updates.has_small_cookie = 1;
        alert(t.issuedCookieSmall.replace('{target}', target));
      } else if (choice === 2) {
        updates.has_medium_cookie = 1;
        alert(t.issuedCookieMedium.replace('{target}', target));
      } else if (choice === 3) {
        updates.has_large_cookie = 1;
        alert(t.issuedCookieLarge.replace('{target}', target));
      }
      await update(ref(db, 'users/' + uid), updates);
      if (target === currentUsername) {
        Object.assign(userData, updates);
      }
      closeIssueCookie();
    }
  }

  async function confirmIssueAchievement(choice) {
    var t = translations[currentLanguage];
    var target = await getTargetUser();
    if (target) {
      var uid = await getUidByUsername(target);
      var updates = {};
      var name;
      if (choice === 1) {
        updates.achieved_100 = 1;
        name = t.achievement100;
      } else if (choice === 2) {
        updates.achieved_500 = 1;
        name = t.achievement500;
      } else if (choice === 3) {
        updates.achieved_1000 = 1;
        name = t.achievement1000;
      } else if (choice === 4) {
        updates.achieved_3000 = 1;
        name = t.achievement3000;
      } else if (choice === 5) {
        updates.achieved_5000 = 1;
        name = t.achievement5000;
      } else if (choice === 6) {
        updates.achieved_10000 = 1;
        name = t.achievement10000;
      }
      await update(ref(db, 'users/' + uid), updates);
      alert(t.issuedAchievement.replace('{name}', name).replace('{target}', target));
      if (target === currentUsername) {
        Object.assign(userData, updates);
      }
      closeIssueAchievement();
    }
  }

  async function blockAccount() {
    var t = translations[currentLanguage];
    var target = await getTargetUser();
    if (target) {
      var uid = await getUidByUsername(target);
      await update(ref(db, 'users/' + uid), { is_blocked: 1 });
      alert(t.blocked.replace('{target}', target));
    }
  }

  async function unblockAccount() {
    var t = translations[currentLanguage];
    var target = await getTargetUser();
    if (target) {
      var uid = await getUidByUsername(target);
      await update(ref(db, 'users/' + uid), { is_blocked: 0 });
      alert(t.unblocked.replace('{target}', target));
    }
  }

  async function resetCount() {
    var t = translations[currentLanguage];
    var target = await getTargetUser();
    if (target) {
      var uid = await getUidByUsername(target);
      await update(ref(db, 'users/' + uid), {
        count: 0,
        achieved_100: 0,
        achieved_500: 0,
        achieved_1000: 0,
        achieved_3000: 0,
        achieved_5000: 0,
        achieved_10000: 0
      });
      alert(t.clicksReset.replace('{target}', target));
      if (target === currentUsername) {
        count = 0;
        userData.count = 0;
        userData.achieved_100 = 0;
        userData.achieved_500 = 0;
        userData.achieved_1000 = 0;
        userData.achieved_3000 = 0;
        userData.achieved_5000 = 0;
        userData.achieved_10000 = 0;
        updateCounter();
      }
    }
  }

  async function doLogout() {
    var t = translations[currentLanguage];
    if (currentUsername && !isDemo) {
      await update(ref(db, 'users/' + currentUid), {
        count: count,
        money: money,
        level: internal_level
      });
    }
    currentUsername = '';
    count = 0;
    money = 0;
    internal_level = 0;
    userData = null;
    currentUid = null;
    if (questTimerInterval) clearInterval(questTimerInterval);
    if (questUpdateInterval) clearInterval(questUpdateInterval);
    if (demoTimerInterval) clearInterval(demoTimerInterval);
    document.getElementById('gameScreen').classList.remove('visible');
    setTimeout(() => { document.getElementById('gameScreen').style.display = 'none'; }, 500);
    document.getElementById('blockedMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('blockedMenu').style.display = 'none'; }, 500);
    document.getElementById('pauseOverlay').style.display = 'none';
    isPaused = false;
    if (isDemo) {
      returnToKey();
    } else {
      document.getElementById('keyContainer').style.display = 'none';
      document.getElementById('keyContainer').style.opacity = '1';
      document.getElementById('keyContainer').style.transform = 'translateY(0)';
      document.getElementById('keyContainer').classList.remove('fade-out');
      document.getElementById('authContainer').style.display = 'block';
      showLogin();
      setTimeout(() => {
        document.getElementById('authContainer').classList.add('fade-in');
      }, 10);
    }
  }

  async function checkAchievements(target) {
    var t = translations[currentLanguage];
    var user;
    if (isDemo && target === 'Demo') {
      user = demoUser;
    } else {
      user = (target === currentUsername) ? userData : await getUser(target);
    }
    var userCount = parseFloat(user.count) || 0;
    var achievements = [
      { threshold: 100, field: 'achieved_100', name: t.achievement100, amount: 100 },
      { threshold: 500, field: 'achieved_500', name: t.achievement500, amount: 500 },
      { threshold: 1000, field: 'achieved_1000', name: t.achievement1000, amount: 1000 },
      { threshold: 3000, field: 'achieved_3000', name: t.achievement3000, amount: 3000 },
      { threshold: 5000, field: 'achieved_5000', name: t.achievement5000, amount: 5000 },
      { threshold: 10000, field: 'achieved_10000', name: t.achievement10000, amount: 10000 }
    ];
    var updates = {};
    achievements.forEach(ach => {
      if (userCount >= ach.threshold && !user[ach.field]) {
        updates[ach.field] = 1;
        if (target === currentUsername) alert(t.achievementUnlocked.replace('{name}', ach.name).replace('{amount}', ach.amount));
      }
    });
    if (Object.keys(updates).length > 0) {
      if (isDemo && target === 'Demo') {
        Object.assign(demoUser, updates);
      } else {
        var uid = (target === currentUsername) ? currentUid : await getUidByUsername(target);
        await update(ref(db, 'users/' + uid), updates);
        if (target === currentUsername) {
          Object.assign(userData, updates);
        }
      }
    }
  }

  function showAchievements() {
    renderAchievements();
    document.getElementById('achievementsMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('achievementsMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('achievementsMenu'));
  }

  function renderAchievements() {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    var content = '<h3>' + t.achievementsTitle + '</h3>';
    content += '<p>' + t.achievement100Desc + (user.achieved_100 ? t.achieved : t.notAchieved) + '</p>';
    content += '<p>' + t.achievement500Desc + (user.achieved_500 ? t.achieved : t.notAchieved) + '</p>';
    content += '<p>' + t.achievement1000Desc + (user.achieved_1000 ? t.achieved : t.notAchieved) + '</p>';
    content += '<p>' + t.achievement3000Desc + (user.achieved_3000 ? t.achieved : t.notAchieved) + '</p>';
    content += '<p>' + t.achievement5000Desc + (user.achieved_5000 ? t.achieved : t.notAchieved) + '</p>';
    content += '<p>' + t.achievement10000Desc + (user.achieved_10000 ? t.achieved : t.notAchieved) + '</p>';
    content += '<button onclick="closeAchievements()">' + t.close + '</button>';
    document.getElementById('achievementsMenu').innerHTML = content;
  }

  function closeAchievements() {
    document.getElementById('achievementsMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('achievementsMenu').style.display = 'none'; }, 500);
  }

  function showPromo() {
    var t = translations[currentLanguage];
    if (isDemo) {
      alert(t.promoDisabledInDemo);
      return;
    }
    renderPromo();
    document.getElementById('promoMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('promoMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('promoMenu'));
  }

  function renderPromo() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.promoTitle + '</h3>';
    content += '<input id="promoCode" type="text" placeholder="' + t.promoPlaceholder + '" />';
    content += '<br><button onclick="redeemPromo()">' + t.redeem + '</button>';
    content += '<button onclick="closePromo()">' + t.close + '</button>';
    document.getElementById('promoMenu').innerHTML = content;
  }

  function closePromo() {
    document.getElementById('promoMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('promoMenu').style.display = 'none'; }, 500);
  }

  async function redeemPromo() {
    var t = translations[currentLanguage];
    var code = trim(document.getElementById('promoCode').value).toUpperCase();
    var updates = {};
    if (code === 'LYSUKA') {
      updates.has_small_cookie = 1;
      alert(t.promoSmallCookie);
    } else if (code === 'KOT') {
      count += 100;
      updates.count = count;
      updateCounter();
      checkAchievements(currentUsername);
      alert(t.promo100Clicks);
    } else if (code === 'SUKA') {
      updates.has_large_cookie = 1;
      alert(t.promoLargeCookie);
    } else {
      alert(t.invalidPromo);
      return;
    }
    await update(ref(db, 'users/' + currentUid), updates);
    Object.assign(userData, updates);
    closePromo();
  }

  // Console
  function toggleConsole() {
    var consoleMenu = document.getElementById('consoleMenu');
    if (consoleMenu.style.display === 'block') {
      closeConsole();
    } else {
      renderConsole();
      consoleMenu.style.display = 'block';
      setTimeout(() => { consoleMenu.classList.add('open'); }, 10);
      dragElement(consoleMenu);
    }
  }

  function renderConsole() {
    var t = translations[currentLanguage];
    var content = '<h3>' + t.consoleTitle + '</h3>';
    content += '<input id="consoleInput" type="text" placeholder="' + t.consolePlaceholder + '" />';
    content += '<br><button onclick="executeConsoleCommand()">' + t.execute + '</button>';
    content += '<button onclick="closeConsole()">' + t.close + '</button>';
    document.getElementById('consoleMenu').innerHTML = content;
  }

  function closeConsole() {
    var consoleMenu = document.getElementById('consoleMenu');
    consoleMenu.classList.remove('open');
    setTimeout(() => { consoleMenu.style.display = 'none'; }, 500);
  }

  async function executeConsoleCommand() {
    var t = translations[currentLanguage];
    var command = trim(document.getElementById('consoleInput').value).toLowerCase();
    if (command === '') {
      alert(t.enterCommand);
      return;
    }
    var updates = {};
    if (command.startsWith('click:set(')) {
      var match = command.match(/click:set\((\d+)\)/);
      if (match) {
        var amount = parseInt(match[1]);
        if (!isNaN(amount) && amount >= 0) {
          count = amount;
          updates.count = count;
          await update(ref(db, 'users/' + currentUid), updates);
          Object.assign(userData, updates);
          checkAchievements(currentUsername);
          updateCounter();
          alert(t.setClicksSuccess.replace('{amount}', amount));
        } else {
          alert(t.invalidNumber);
        }
      } else {
        alert(t.invalidFormat.replace('{format}', 'click:set(—á–∏—Å–ª–æ)'));
      }
    } else if (command === 'give:cookie.small') {
      updates.has_small_cookie = 1;
      await update(ref(db, 'users/' + currentUid), updates);
      Object.assign(userData, updates);
      alert(t.gaveSmallCookie);
    } else if (command === 'give:cookie.medium') {
      updates.has_medium_cookie = 1;
      await update(ref(db, 'users/' + currentUid), updates);
      Object.assign(userData, updates);
      alert(t.gaveMediumCookie);
    } else if (command === 'give:cookie.big') {
      updates.has_large_cookie = 1;
      await update(ref(db, 'users/' + currentUid), updates);
      Object.assign(userData, updates);
      alert(t.gaveLargeCookie);
    } else if (command === 'demomode:exit') {
      if (isDemo) {
        closeConsole();
        returnToKey();
        alert(t.exitDemo);
      } else {
        alert(t.notInDemo);
      }
    } else if (command === 'autopasskey') {
      if (document.getElementById('keyContainer').style.display === 'block') {
        document.getElementById('keyContainer').classList.add('fade-out');
        setTimeout(() => {
          document.getElementById('keyContainer').style.display = 'none';
          document.getElementById('authContainer').style.display = 'block';
          setTimeout(() => {
            document.getElementById('authContainer').classList.add('fade-in');
            showRegister();
          }, 10);
        }, 500);
        alert(t.autoPassKey);
      } else {
        alert(t.notInKeyMenu);
      }
    } else if (command.startsWith('demomode:edit_time:set(')) {
      var match = command.match(/demomode:edit_time:set\((.+)\)/);
      if (match) {
        var timeStr = match[1].toLowerCase();
        if (timeStr === 'infinity') {
          if (isDemo) {
            clearInterval(demoTimerInterval);
            isInfiniteDemo = true;
            document.getElementById('demoTimer').innerText = t.demoTimerInfinity;
            alert(t.demoTimeInfinity);
          } else {
            alert(t.notInDemo);
          }
        } else {
          var timeParts = timeStr.split(':');
          if (timeParts.length === 3) {
            var hours = parseInt(timeParts[0]);
            var minutes = parseInt(timeParts[1]);
            var seconds = parseInt(timeParts[2]);
            if (!isNaN(hours) && !isNaN(minutes) && !isNaN(seconds) && hours >= 0 && minutes >= 0 && seconds >= 0) {
              if (isDemo) {
                demoTimeLeft = hours * 3600 + minutes * 60 + seconds;
                if (isInfiniteDemo) {
                  isInfiniteDemo = false;
                  demoTimerInterval = setInterval(updateDemoTimer, 1000);
                }
                updateDemoTimer();
                alert(t.demoTimeSet.replace('{time}', timeStr));
              } else {
                alert(t.notInDemo);
              }
            } else {
              alert(t.invalidTimeFormat);
            }
          } else {
            alert(t.invalidFormat.replace('{format}', 'demomode:edit_time:set(00:00:00) or demomode:edit_time:set(infinity)'));
          }
        }
      } else {
        alert(t.invalidFormat.replace('{format}', 'demomode:edit_time:set(00:00:00) or demomode:edit_time:set(infinity)'));
      }
    } else {
      alert(t.invalidCommand.replace('{command}', command));
    }
    document.getElementById('consoleInput').value = '';
  }

  // Quests
  function showQuests() {
    renderQuests();
    document.getElementById('questsMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('questsMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('questsMenu'));
  }

  function renderQuests() {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    var content = '<h3>' + t.questsTitle + '</h3>';
    quests.forEach(function(quest) {
      var isCompleted = user.completed_quests.includes(quest.id);
      var isActive = user.active_quest === quest.id;
      var status = isCompleted ? t.questCompleted : t.questNotCompleted;
      content += '<p>' + status + ' ' + quest.description + ' reward: ' + quest.reward + ' money</p>';
      if (!isCompleted) {
        if (isActive) {
          content += '<button onclick="cancelQuest(' + quest.id + ')">' + t.cancelQuest + '</button>';
        } else {
          content += '<button onclick="takeQuest(' + quest.id + ')">' + t.takeQuest + '</button>';
        }
      }
      content += '<br>';
    });
    content += '<button onclick="closeQuests()">' + t.close + '</button>';
    document.getElementById('questsMenu').innerHTML = content;
  }

  function closeQuests() {
    document.getElementById('questsMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('questsMenu').style.display = 'none'; }, 500);
  }

  async function takeQuest(questId) {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    if (user.active_quest !== null) {
      alert(t.activeQuest);
      return;
    }
    user.active_quest = questId;
    await update(ref(db, 'users/' + currentUid), { active_quest: questId });
    questStartTime = Date.now();
    questClicks = 0;
    startQuestTimer();
    startQuestUpdateInterval();
    updateCurrentQuest();
    closeQuests();
  }

  async function cancelQuest(questId) {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    if (user.active_quest === questId) {
      user.active_quest = null;
      await update(ref(db, 'users/' + currentUid), { active_quest: null });
      if (questTimerInterval) clearInterval(questTimerInterval);
      if (questUpdateInterval) clearInterval(questUpdateInterval);
      updateCurrentQuest();
      alert(t.questCancelled);
      renderQuests();
    }
  }

  function startQuestTimer() {
    if (questTimerInterval) clearInterval(questTimerInterval);
    questTimerInterval = setInterval(checkQuestCompletion, 1000);
  }

  function startQuestUpdateInterval() {
    if (questUpdateInterval) clearInterval(questUpdateInterval);
    questUpdateInterval = setInterval(updateCurrentQuest, 1000);
  }

  async function checkQuestCompletion() {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    if (user.active_quest === null) return;
    var quest = quests.find(q => q.id === user.active_quest);
    if (!quest) return;
    var elapsed = (Date.now() - questStartTime) / 1000;
    if (elapsed > quest.timeLimit) {
      alert(t.questTimeExpired);
      user.active_quest = null;
      await update(ref(db, 'users/' + currentUid), { active_quest: null });
      if (questTimerInterval) clearInterval(questTimerInterval);
      if (questUpdateInterval) clearInterval(questUpdateInterval);
      updateCurrentQuest();
      return;
    }
    if (questClicks >= quest.clicksRequired) {
      money += quest.reward;
      internal_level += 500;
      user.money = money;
      user.level = internal_level;
      user.completed_quests.push(quest.id);
      user.active_quest = null;
      await update(ref(db, 'users/' + currentUid), {
        money: money,
        level: internal_level,
        completed_quests: user.completed_quests,
        active_quest: null
      });
      if (questTimerInterval) clearInterval(questTimerInterval);
      if (questUpdateInterval) clearInterval(questUpdateInterval);
      updateMoney();
      updateLevel();
      updateCurrentQuest();
      alert(t.questCompletedSuccess.replace('{reward}', quest.reward));
    }
  }

  function updateCurrentQuest() {
    var t = translations[currentLanguage];
    var user = getCurrentUser();
    if (user.active_quest === null) {
      document.getElementById('currentQuest').innerText = t.currentQuestNone;
    } else {
      var quest = quests.find(q => q.id === user.active_quest);
      var remaining = Math.max(0, quest.timeLimit - Math.floor((Date.now() - questStartTime) / 1000));
      document.getElementById('currentQuest').innerText = t.currentQuest.replace('{clicks}', questClicks).replace('{required}', quest.clicksRequired).replace('{remaining}', remaining);
    }
  }

  // Pause
  function pauseGame() {
    if (isPaused) return;
    isPaused = true;
    pauseStartTime = Date.now();
    var user = getCurrentUser();
    wasQuestActive = (user.active_quest !== null);
    wasDemoTimerActive = (isDemo && !isInfiniteDemo && demoTimerInterval !== null);
    if (questTimerInterval) clearInterval(questTimerInterval);
    if (questUpdateInterval) clearInterval(questUpdateInterval);
    if (wasDemoTimerActive) clearInterval(demoTimerInterval);
    document.getElementById('pauseOverlay').style.display = 'flex';
  }

  function resumeGame() {
    if (!isPaused) return;
    isPaused = false;
    var pauseDuration = Date.now() - pauseStartTime;
    var user = getCurrentUser();
    if (wasQuestActive) {
      questStartTime += pauseDuration;
      startQuestTimer();
      startQuestUpdateInterval();
    }
    if (wasDemoTimerActive) {
      demoTimerInterval = setInterval(updateDemoTimer, 1000);
    }
    document.getElementById('pauseOverlay').style.display = 'none';
  }

  function showSettings() {
    renderSettings();
    document.getElementById('settingsMenu').style.display = 'block';
    setTimeout(() => { document.getElementById('settingsMenu').classList.add('open'); }, 10);
    dragElement(document.getElementById('settingsMenu'));
  }

  function renderSettings() {
    var t = translations[currentLanguage];
    var currentScale = localStorage.getItem('uiScale') || '1';
    var content = '<h3>' + t.settingsTitle + '</h3>';
    content += '<label for="uiScale">' + t.uiScaleLabel + '</label><br>';
    content += '<select id="uiScale">';
    content += '<option value="0.8"' + (currentScale === '0.8' ? ' selected' : '') + '>' + t.smallScale + '</option>';
    content += '<option value="1"' + (currentScale === '1' ? ' selected' : '') + '>' + t.mediumScale + '</option>';
    content += '<option value="1.2"' + (currentScale === '1.2' ? ' selected' : '') + '>' + t.largeScale + '</option>';
    content += '</select><br>';
    content += '<label for="languageSelect">' + t.languageLabel + '</label><br>';
    content += '<select id="languageSelect">';
    content += '<option value="ru"' + (currentLanguage === 'ru' ? ' selected' : '') + '>' + t.russian + '</option>';
    content += '<option value="en"' + (currentLanguage === 'en' ? ' selected' : '') + '>' + t.english + '</option>';
    content += '<option value="uk"' + (currentLanguage === 'uk' ? ' selected' : '') + '>' + t.ukrainian + '</option>';
    content += '</select><br>';
    content += '<button onclick="applySettings()">' + t.apply + '</button><br>';
    content += '<button onclick="closeSettings()">' + t.close + '</button>';
    document.getElementById('settingsMenu').innerHTML = content;
  }

  function applySettings() {
    var scale = document.getElementById('uiScale').value;
    localStorage.setItem('uiScale', scale);
    document.body.style.transform = `scale(${scale})`;
    document.body.style.width = `${100 / parseFloat(scale)}%`;
    document.body.style.height = `${100 / parseFloat(scale)}%`;

    var lang = document.getElementById('languageSelect').value;
    setLanguage(lang);
    closeSettings();
  }

  function closeSettings() {
    document.getElementById('settingsMenu').classList.remove('open');
    setTimeout(() => { document.getElementById('settingsMenu').style.display = 'none'; }, 500);
  }

  // Update quest descriptions
  updateQuestDescriptions();

  window.onbeforeunload = async function() {
    if (currentUsername && !isDemo) {
      await update(ref(db, 'users/' + currentUid), {
        count: count,
        money: money,
        level: internal_level
      });
    }
  };
</script>
</body>
</html>
